<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.330">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Iman Mousavi">
<meta name="dcterms.date" content="2023-08-17">

<title>Pricing Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Pricing-Data-Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="Pricing-Data-Analysis_files/libs/quarto-html/quarto.js"></script>
<script src="Pricing-Data-Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="Pricing-Data-Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Pricing-Data-Analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="Pricing-Data-Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Pricing-Data-Analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Pricing-Data-Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Pricing-Data-Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Pricing-Data-Analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#distance-bucket" id="toc-distance-bucket" class="nav-link active" data-scroll-target="#distance-bucket">1. Distance Bucket</a>
  <ul class="collapse">
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda">EDA</a>
  <ul class="collapse">
  <li><a href="#request" id="toc-request" class="nav-link" data-scroll-target="#request">Request</a></li>
  <li><a href="#offered-to-created-percentage" id="toc-offered-to-created-percentage" class="nav-link" data-scroll-target="#offered-to-created-percentage">Offered to Created Percentage</a></li>
  <li><a href="#accepted-to-offered-percentage" id="toc-accepted-to-offered-percentage" class="nav-link" data-scroll-target="#accepted-to-offered-percentage">Accepted to Offered Percentage</a></li>
  <li><a href="#fulfillment-percentage" id="toc-fulfillment-percentage" class="nav-link" data-scroll-target="#fulfillment-percentage">Fulfillment Percentage</a></li>
  <li><a href="#total-and-average-ride-fare" id="toc-total-and-average-ride-fare" class="nav-link" data-scroll-target="#total-and-average-ride-fare">Total and Average Ride Fare</a></li>
  <li><a href="#relationship-between-variables" id="toc-relationship-between-variables" class="nav-link" data-scroll-target="#relationship-between-variables">Relationship between Variables</a></li>
  </ul></li>
  <li><a href="#suggestions" id="toc-suggestions" class="nav-link" data-scroll-target="#suggestions">Suggestions</a></li>
  </ul></li>
  <li><a href="#ride-loss-calculation" id="toc-ride-loss-calculation" class="nav-link" data-scroll-target="#ride-loss-calculation">2. Ride Loss Calculation</a>
  <ul class="collapse">
  <li><a href="#comparing-the-days" id="toc-comparing-the-days" class="nav-link" data-scroll-target="#comparing-the-days">Comparing the Days</a></li>
  <li><a href="#losses-calculations" id="toc-losses-calculations" class="nav-link" data-scroll-target="#losses-calculations">Losses Calculations</a></li>
  </ul></li>
  <li><a href="#price-monitoring" id="toc-price-monitoring" class="nav-link" data-scroll-target="#price-monitoring">3. Price Monitoring</a>
  <ul class="collapse">
  <li><a href="#recommending-price-actions" id="toc-recommending-price-actions" class="nav-link" data-scroll-target="#recommending-price-actions">Recommending Price Actions</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing Values</a></li>
  </ul></li>
  <li><a href="#price-test" id="toc-price-test" class="nav-link" data-scroll-target="#price-test">4. Price Test</a>
  <ul class="collapse">
  <li><a href="#data-description" id="toc-data-description" class="nav-link" data-scroll-target="#data-description">Data Description</a></li>
  <li><a href="#aggregated-values" id="toc-aggregated-values" class="nav-link" data-scroll-target="#aggregated-values">Aggregated Values</a></li>
  <li><a href="#final-thoughts" id="toc-final-thoughts" class="nav-link" data-scroll-target="#final-thoughts">Final Thoughts</a></li>
  <li><a href="#a-more-elaborate-methodology" id="toc-a-more-elaborate-methodology" class="nav-link" data-scroll-target="#a-more-elaborate-methodology">A More Elaborate Methodology</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Pricing Data Analysis</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Iman Mousavi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 17, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>


<div class="no-row-height column-margin column-container"><div class="">
<p><img src="Pricing-Data-Analysis_files/snapp-logo.png" class="img-fluid"></p>
</div></div><section id="distance-bucket" class="level1">
<h1>1. Distance Bucket</h1>
<p>When a customer submits an order, its data is logged in the “Order Table“. Then this order is offered to bikers. This data is stored in the “Offer Table,” and it means that an order is offered to “Biker ID” at the “created_at” moment, and when a “Biker ID” accepts to deliver that order, its data is stored in the “Allotment Table.”</p>
<p>The amount a customer pays is called “Fare,” The distance between the source and destination is called “Distance” in “The invoice Table“.</p>
<p>When an order is successfully finished, the “Status” field in the “Order Table” is “Delivered,” and when it fails to be completed, the “Status” field is “Canceled.”</p>
<p>“Ride” means a successfully finished ride, and “Request” means orders that customers create.</p>
<p>What’s your analysis of the pricing in this city? What are your suggestions to maximize the ride numbers?</p>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<p>First few rows of the data set are as follows:</p>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">City</th>
<th data-quarto-table-cell-role="th">Service Type</th>
<th data-quarto-table-cell-role="th">Created Date</th>
<th data-quarto-table-cell-role="th">Distance Buckets(KM)</th>
<th data-quarto-table-cell-role="th">Request</th>
<th data-quarto-table-cell-role="th">Offered Requests</th>
<th data-quarto-table-cell-role="th">Accepted Requests</th>
<th data-quarto-table-cell-role="th">Ride</th>
<th data-quarto-table-cell-role="th">Total Ride Fare(GMV)(IRR)</th>
<th data-quarto-table-cell-role="th">Offered-Order / Created-Order %</th>
<th data-quarto-table-cell-role="th">Accepted-Order / Offered-Order%</th>
<th data-quarto-table-cell-role="th">Fullfillment Rate%</th>
<th data-quarto-table-cell-role="th">Average Ride Fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>A</td>
<td>1.0</td>
<td>2022-06-22</td>
<td>0-1</td>
<td>763</td>
<td>737</td>
<td>611</td>
<td>507</td>
<td>53485000</td>
<td>97%</td>
<td>83%</td>
<td>66%</td>
<td>105,493</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>A</td>
<td>1.0</td>
<td>2022-06-22</td>
<td>1-2</td>
<td>1358</td>
<td>1330</td>
<td>1090</td>
<td>933</td>
<td>100400000</td>
<td>98%</td>
<td>82%</td>
<td>69%</td>
<td>107,610</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>A</td>
<td>1.0</td>
<td>2022-06-22</td>
<td>2-3</td>
<td>1094</td>
<td>1062</td>
<td>883</td>
<td>779</td>
<td>102060000</td>
<td>97%</td>
<td>83%</td>
<td>71%</td>
<td>131,014</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>A</td>
<td>1.0</td>
<td>2022-06-22</td>
<td>3-4</td>
<td>938</td>
<td>916</td>
<td>737</td>
<td>628</td>
<td>89610000</td>
<td>98%</td>
<td>80%</td>
<td>67%</td>
<td>142,691</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>A</td>
<td>1.0</td>
<td>2022-06-22</td>
<td>4-5</td>
<td>1060</td>
<td>1036</td>
<td>713</td>
<td>609</td>
<td>95235000</td>
<td>98%</td>
<td>69%</td>
<td>57%</td>
<td>156,379</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><code>City</code>, <code>Service Type</code>, and <code>Created Date</code> contain no useful information due to the prefiltering process. These columns maintain a constant presence throughout the dataset. Additionally, the final row in the Excel sheet should be removed here.</p>
<p>Given the non-standard format of the column names, I have standardized them for better readability and compatibility with Python conventions.</p>
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-stdout">
<pre><code>Index(['dist_buck', 'request', 'offered_requests', 'accepted_requests', 'ride',
       'tot_ride_fare', 'offered_created%', 'accepted_offered%',
       'fulfillment_rate%', 'average_ride_fare'],
      dtype='object')</code></pre>
</div>
</div>
<p>The presence of the ‘%’ sign has led to three ratio columns having an ‘object’ data type, which is inaccurate and complicates their analysis.</p>
<p>Checking data types:</p>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 34 entries, 0 to 33
Data columns (total 10 columns):
 #   Column             Non-Null Count  Dtype 
---  ------             --------------  ----- 
 0   dist_buck          34 non-null     object
 1   request            34 non-null     int64 
 2   offered_requests   34 non-null     int64 
 3   accepted_requests  34 non-null     int64 
 4   ride               34 non-null     int64 
 5   tot_ride_fare      34 non-null     int64 
 6   offered_created%   34 non-null     int64 
 7   accepted_offered%  34 non-null     int64 
 8   fulfillment_rate%  34 non-null     int64 
 9   average_ride_fare  34 non-null     object
dtypes: int64(8), object(2)
memory usage: 2.8+ KB</code></pre>
</div>
</div>
<p>The column <code>Average Ride Fare</code> is currently of the ‘object’ data type, indicating that it hasn’t been stored as a numeric column. This is likely due to the inclusion of commas to enhance digit readability. However, to transform the column into a numeric format, I will remove the commas.</p>
</section>
<section id="eda" class="level2">
<h2 class="anchored" data-anchor-id="eda">EDA</h2>
<p>Exploratory Data Analysis helps us to obtain a general understanding of data and answer to valuable questions along the way.</p>
<section id="request" class="level3">
<h3 class="anchored" data-anchor-id="request">Request</h3>
<p>As the initial step, let’s examine the <code>request</code> column to identify the distance buckets that are more commonly favored.</p>
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>1-2</td>
<td>1358</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>6-7</td>
<td>1159</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>7-8</td>
<td>1151</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>2-3</td>
<td>1094</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>5-6</td>
<td>1091</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>8-9</td>
<td>1075</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4-5</td>
<td>1060</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>9-10</td>
<td>940</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>3-4</td>
<td>938</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>10-11</td>
<td>777</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>A significant portion of the requests are associated with shorter distances, specifically those less than 10 kilometers.</p>
<p>A histogram can provide a more insightful perspective into the distribution of these bins.</p>
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-12-output-1.png" width="587" height="455"></p>
</div>
</div>
<p>The majority of distance buckets contain fewer than 200 requests. However, as observed earlier, certain bins exhibit a considerably higher volume of requests.</p>
<p>To gain a better understanding of distance buckets with fewer than 200 requests, I’ve generated the following pandas dataframe:</p>
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>31-32</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>32-33</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>34-35</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>33-34</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>30-31</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>26-27</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>28-29</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>&gt;=35</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>25-26</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>24-25</td>
<td>14</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Evidently, there is a significant decline in the number of customer orders for longer distances.</p>
</section>
<section id="offered-to-created-percentage" class="level3">
<h3 class="anchored" data-anchor-id="offered-to-created-percentage">Offered to Created Percentage</h3>
<p>The subsequent table is arranged in descending order based on the percentage of Offered Orders to Created Orders:</p>
<div class="cell" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>&gt;=35</td>
<td>6</td>
<td>100</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>34-35</td>
<td>3</td>
<td>100</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>33-34</td>
<td>4</td>
<td>100</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>32-33</td>
<td>3</td>
<td>100</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>31-32</td>
<td>2</td>
<td>100</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>28-29</td>
<td>5</td>
<td>100</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>25-26</td>
<td>10</td>
<td>100</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>24-25</td>
<td>14</td>
<td>100</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>21-22</td>
<td>36</td>
<td>100</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1-2</td>
<td>1358</td>
<td>98</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Greater distances are more likely to be offered completely. The histogram is plotted next:</p>
<div class="cell" data-execution_count="15">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-15-output-1.png" width="587" height="455"></p>
</div>
</div>
<p>A total of 22 distance buckets have exhibited an <code>Offered to Created Orders</code> ratio surpassing 95%.</p>
<p>There are a few buckets with notably low values of this ratio, falling below 80%. The subsequent dataframe identifies these specific buckets.</p>
<div class="cell" data-execution_count="16">
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>23-24</td>
<td>14</td>
<td>71</td>
<td>331000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>26-27</td>
<td>4</td>
<td>75</td>
<td>355000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>30-31</td>
<td>4</td>
<td>75</td>
<td>647500</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>While the requests within these buckets might not immediately stand out, their <code>average ride fare</code> implies a significant value associated with these requests.</p>
</section>
<section id="accepted-to-offered-percentage" class="level3">
<h3 class="anchored" data-anchor-id="accepted-to-offered-percentage">Accepted to Offered Percentage</h3>
<p>To determine the proportion of accepted offers for bikers across different distance buckets, we can once more utilize a histogram to visualize the distribution of the <code>accepted_offered%</code> values. This will provide us with a comprehensive view of the data.</p>
<div class="cell" data-execution_count="17">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-17-output-1.png" width="587" height="456"></p>
</div>
</div>
<p>The majority of distance buckets exhibit an <code>accepted-to-offered</code> percentage ranging between 50 and 60. Nonetheless, there exist certain buckets with ratios lower than 50%. To gain a deeper understanding, let’s investigate and identify the distance buckets with percentages less than 60, arranging them in ascending order.</p>
<div class="cell" data-execution_count="18">
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>21-22</td>
<td>36</td>
<td>375500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>22-23</td>
<td>43</td>
<td>466000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>16-17</td>
<td>44</td>
<td>280288</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>14-15</td>
<td>48</td>
<td>253193</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>18-19</td>
<td>49</td>
<td>302000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>25-26</td>
<td>50</td>
<td>330000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>13-14</td>
<td>52</td>
<td>255208</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>12-13</td>
<td>53</td>
<td>238963</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>15-16</td>
<td>53</td>
<td>268990</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>17-18</td>
<td>54</td>
<td>289630</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>19-20</td>
<td>54</td>
<td>316667</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>10-11</td>
<td>55</td>
<td>217089</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>11-12</td>
<td>55</td>
<td>230844</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>9-10</td>
<td>57</td>
<td>208434</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>20-21</td>
<td>58</td>
<td>333750</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>8-9</td>
<td>59</td>
<td>196339</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Moderate distance buckets are more prone to get accepted with lower probability. <strong>We need to concentrate on these distance buckets if our intention is to raise ride numbers.</strong></p>
</section>
<section id="fulfillment-percentage" class="level3">
<h3 class="anchored" data-anchor-id="fulfillment-percentage">Fulfillment Percentage</h3>
<p>This ratio holds valuable information as well, indicating the percentage of requests that have been fulfilled entirely. As a first step, let’s examine its histogram to gain insights into its distribution.</p>
<div class="cell" data-execution_count="19">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-19-output-1.png" width="587" height="455"></p>
</div>
</div>
<p>21 distance buckets have fullfillment rate lower than 50. Here are those buckets sorted by the ratio in ascending order:</p>
<div class="cell" data-execution_count="20">
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>33-34</td>
<td>4</td>
<td>100</td>
<td>100</td>
<td>25</td>
<td>565000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>18-19</td>
<td>90</td>
<td>88</td>
<td>49</td>
<td>28</td>
<td>302000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>21-22</td>
<td>36</td>
<td>100</td>
<td>36</td>
<td>28</td>
<td>375500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>22-23</td>
<td>15</td>
<td>93</td>
<td>43</td>
<td>33</td>
<td>466000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>34-35</td>
<td>3</td>
<td>100</td>
<td>67</td>
<td>33</td>
<td>445000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>16-17</td>
<td>159</td>
<td>95</td>
<td>44</td>
<td>33</td>
<td>280288</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>&gt;=35</td>
<td>6</td>
<td>100</td>
<td>83</td>
<td>33</td>
<td>472500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>14-15</td>
<td>361</td>
<td>94</td>
<td>48</td>
<td>33</td>
<td>253193</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>19-20</td>
<td>68</td>
<td>90</td>
<td>54</td>
<td>35</td>
<td>316667</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>20-21</td>
<td>44</td>
<td>91</td>
<td>58</td>
<td>36</td>
<td>333750</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>23-24</td>
<td>14</td>
<td>71</td>
<td>70</td>
<td>36</td>
<td>331000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>13-14</td>
<td>459</td>
<td>94</td>
<td>52</td>
<td>37</td>
<td>255208</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>17-18</td>
<td>145</td>
<td>92</td>
<td>54</td>
<td>37</td>
<td>289630</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>15-16</td>
<td>260</td>
<td>94</td>
<td>53</td>
<td>38</td>
<td>268990</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>12-13</td>
<td>488</td>
<td>93</td>
<td>53</td>
<td>39</td>
<td>238963</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>25-26</td>
<td>10</td>
<td>100</td>
<td>50</td>
<td>40</td>
<td>330000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>28-29</td>
<td>5</td>
<td>100</td>
<td>80</td>
<td>40</td>
<td>345000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>10-11</td>
<td>777</td>
<td>97</td>
<td>55</td>
<td>41</td>
<td>217089</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>11-12</td>
<td>705</td>
<td>95</td>
<td>55</td>
<td>43</td>
<td>230844</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>9-10</td>
<td>940</td>
<td>97</td>
<td>57</td>
<td>44</td>
<td>208434</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>8-9</td>
<td>1075</td>
<td>96</td>
<td>59</td>
<td>46</td>
<td>196339</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Moderate to long distances have exhibited lower rates of fulfillment, and the reasons underlying this phenomenon should be investigated. It’s imperative to distinguish between buckets with only a few requests and those with a more considerable number. I need criteria to judge whether a distance bucket has a low number of requests or not, and to achieve this, I will use the first quarter of requests across the buckets.</p>
<p>Distance bukcets with low number of requests are:</p>
<div class="cell" data-execution_count="22">
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>33-34</td>
<td>4</td>
<td>100</td>
<td>100</td>
<td>25</td>
<td>565000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>34-35</td>
<td>3</td>
<td>100</td>
<td>67</td>
<td>33</td>
<td>445000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>&gt;=35</td>
<td>6</td>
<td>100</td>
<td>83</td>
<td>33</td>
<td>472500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>25-26</td>
<td>10</td>
<td>100</td>
<td>50</td>
<td>40</td>
<td>330000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>28-29</td>
<td>5</td>
<td>100</td>
<td>80</td>
<td>40</td>
<td>345000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The above table consists of distance buckets with almost the longest paths implying that only a few requests want to send their packages in this range of KMs. It’s recommended to have an estimate of potential orders in each distance buckets via marketing research methods. It would clarify high prices cause the low number of requests or it’s just normal for long paths.</p>
<p>And those with more normal number of requests are:</p>
<div class="cell" data-execution_count="23">
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>18-19</td>
<td>90</td>
<td>88</td>
<td>49</td>
<td>28</td>
<td>302000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>21-22</td>
<td>36</td>
<td>100</td>
<td>36</td>
<td>28</td>
<td>375500</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>22-23</td>
<td>15</td>
<td>93</td>
<td>43</td>
<td>33</td>
<td>466000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>16-17</td>
<td>159</td>
<td>95</td>
<td>44</td>
<td>33</td>
<td>280288</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>14-15</td>
<td>361</td>
<td>94</td>
<td>48</td>
<td>33</td>
<td>253193</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>19-20</td>
<td>68</td>
<td>90</td>
<td>54</td>
<td>35</td>
<td>316667</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>20-21</td>
<td>44</td>
<td>91</td>
<td>58</td>
<td>36</td>
<td>333750</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>23-24</td>
<td>14</td>
<td>71</td>
<td>70</td>
<td>36</td>
<td>331000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>13-14</td>
<td>459</td>
<td>94</td>
<td>52</td>
<td>37</td>
<td>255208</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>17-18</td>
<td>145</td>
<td>92</td>
<td>54</td>
<td>37</td>
<td>289630</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>15-16</td>
<td>260</td>
<td>94</td>
<td>53</td>
<td>38</td>
<td>268990</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>12-13</td>
<td>488</td>
<td>93</td>
<td>53</td>
<td>39</td>
<td>238963</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>10-11</td>
<td>777</td>
<td>97</td>
<td>55</td>
<td>41</td>
<td>217089</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>11-12</td>
<td>705</td>
<td>95</td>
<td>55</td>
<td>43</td>
<td>230844</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>9-10</td>
<td>940</td>
<td>97</td>
<td>57</td>
<td>44</td>
<td>208434</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>8-9</td>
<td>1075</td>
<td>96</td>
<td>59</td>
<td>46</td>
<td>196339</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>On the other hand, let’s take a look at the buckets with the most fulfillment percentages:</p>
<div class="cell" data-execution_count="24">
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2-3</td>
<td>1094</td>
<td>97</td>
<td>83</td>
<td>71</td>
<td>131014</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1-2</td>
<td>1358</td>
<td>98</td>
<td>82</td>
<td>69</td>
<td>107610</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>3-4</td>
<td>938</td>
<td>98</td>
<td>80</td>
<td>67</td>
<td>142691</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>32-33</td>
<td>3</td>
<td>100</td>
<td>67</td>
<td>67</td>
<td>627500</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0-1</td>
<td>763</td>
<td>97</td>
<td>83</td>
<td>66</td>
<td>105493</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>4-5</td>
<td>1060</td>
<td>98</td>
<td>69</td>
<td>57</td>
<td>156379</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>24-25</td>
<td>14</td>
<td>100</td>
<td>93</td>
<td>57</td>
<td>391875</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>5-6</td>
<td>1091</td>
<td>97</td>
<td>68</td>
<td>55</td>
<td>167455</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>6-7</td>
<td>1159</td>
<td>98</td>
<td>66</td>
<td>55</td>
<td>176598</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>7-8</td>
<td>1151</td>
<td>97</td>
<td>64</td>
<td>52</td>
<td>186631</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>Probability of delivering for shorter distances is higher than moderate and longer ones.</strong></p>
</section>
<section id="total-and-average-ride-fare" class="level3">
<h3 class="anchored" data-anchor-id="total-and-average-ride-fare">Total and Average Ride Fare</h3>
<p>Finally, let’s delve into the distribution of these crucial numeric columns and explore the potential questions they might raise.</p>
<p><strong>NOTE: the values turned to MillionIRR for conveniece.</strong></p>
<div class="cell" data-execution_count="25">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-25-output-1.png" width="587" height="455"></p>
</div>
</div>
<p>A total of 18 distance buckets yielded less than 20 MIRR (Metric for Income from Rides) on that specific day for service type 1. In contrast, 5 distance buckets generated substantial revenues. Let’s identify both groups starting with those with low revenue:</p>
<div class="cell" data-execution_count="26">
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">tot_ride_fare_mirr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>31-32</td>
<td>2</td>
<td>100</td>
<td>100</td>
<td>50</td>
<td>0.300</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>34-35</td>
<td>3</td>
<td>100</td>
<td>67</td>
<td>33</td>
<td>0.445</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>33-34</td>
<td>4</td>
<td>100</td>
<td>100</td>
<td>25</td>
<td>0.565</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>28-29</td>
<td>5</td>
<td>100</td>
<td>80</td>
<td>40</td>
<td>0.690</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>26-27</td>
<td>4</td>
<td>75</td>
<td>100</td>
<td>50</td>
<td>0.710</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>&gt;=35</td>
<td>6</td>
<td>100</td>
<td>83</td>
<td>33</td>
<td>0.945</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>32-33</td>
<td>3</td>
<td>100</td>
<td>67</td>
<td>67</td>
<td>1.255</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>30-31</td>
<td>4</td>
<td>75</td>
<td>67</td>
<td>50</td>
<td>1.295</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>25-26</td>
<td>10</td>
<td>100</td>
<td>50</td>
<td>40</td>
<td>1.320</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>23-24</td>
<td>14</td>
<td>71</td>
<td>70</td>
<td>36</td>
<td>1.655</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>22-23</td>
<td>15</td>
<td>93</td>
<td>43</td>
<td>33</td>
<td>2.330</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>24-25</td>
<td>14</td>
<td>100</td>
<td>93</td>
<td>57</td>
<td>3.135</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>21-22</td>
<td>36</td>
<td>100</td>
<td>36</td>
<td>28</td>
<td>3.755</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>20-21</td>
<td>44</td>
<td>91</td>
<td>58</td>
<td>36</td>
<td>5.340</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>18-19</td>
<td>90</td>
<td>88</td>
<td>49</td>
<td>28</td>
<td>7.550</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>19-20</td>
<td>68</td>
<td>90</td>
<td>54</td>
<td>35</td>
<td>7.600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>16-17</td>
<td>159</td>
<td>95</td>
<td>44</td>
<td>33</td>
<td>14.575</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>17-18</td>
<td>145</td>
<td>92</td>
<td>54</td>
<td>37</td>
<td>15.640</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>It’s expected to have an acceptable amount of revenue in longer distances despite its lower requests. Lower rates of fulfillment, though, has prohibited that goal.</p>
<p>Next, those with higher revenue:</p>
<div class="cell" data-execution_count="27">
<div class="cell-output cell-output-display" data-execution_count="26">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">tot_ride_fare_mirr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>7-8</td>
<td>1151</td>
<td>97</td>
<td>64</td>
<td>52</td>
<td>112.725</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>6-7</td>
<td>1159</td>
<td>98</td>
<td>66</td>
<td>55</td>
<td>111.610</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2-3</td>
<td>1094</td>
<td>97</td>
<td>83</td>
<td>71</td>
<td>102.060</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>5-6</td>
<td>1091</td>
<td>97</td>
<td>68</td>
<td>55</td>
<td>101.310</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>1-2</td>
<td>1358</td>
<td>98</td>
<td>82</td>
<td>69</td>
<td>100.400</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>To gain a deeper understanding of the fare amount, considering the average figures can also be insightful:</p>
<div class="cell" data-execution_count="28">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-28-output-1.png" width="578" height="455"></p>
</div>
</div>
<p>3 distance buckets appear to be more profitable having averages higher than 400000. In the following table, you can see which buckets have such averages:</p>
<div class="cell" data-execution_count="29">
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">dist_buck</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">ride</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">tot_ride_fare_mirr</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>34-35</td>
<td>3</td>
<td>1</td>
<td>67</td>
<td>33</td>
<td>0.445</td>
<td>445000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>22-23</td>
<td>15</td>
<td>5</td>
<td>43</td>
<td>33</td>
<td>2.330</td>
<td>466000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>&gt;=35</td>
<td>6</td>
<td>2</td>
<td>83</td>
<td>33</td>
<td>0.945</td>
<td>472500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>33-34</td>
<td>4</td>
<td>1</td>
<td>100</td>
<td>25</td>
<td>0.565</td>
<td>565000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>32-33</td>
<td>3</td>
<td>2</td>
<td>67</td>
<td>67</td>
<td>1.255</td>
<td>627500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>30-31</td>
<td>4</td>
<td>2</td>
<td>67</td>
<td>50</td>
<td>1.295</td>
<td>647500</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Indeed, it’s evident that longer distances with fewer requests tend to yield higher average ride fares, but even so low rates of fulfillment might imply bad practices of pricing.</p>
</section>
<section id="relationship-between-variables" class="level3">
<h3 class="anchored" data-anchor-id="relationship-between-variables">Relationship between Variables</h3>
<p>In the upcoming three scatterplots, I intend to examine whether any relationships exist between the variables.</p>
<div class="cell" data-execution_count="30">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-30-output-1.png" width="596" height="455"></p>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-31-output-1.png" width="597" height="455"></p>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-32-output-1.png" width="587" height="455"></p>
</div>
</div>
<p>A negative virtually linear relationship can be seen in the first part of <code>accepted_offered%</code> and <code>fulfillment_rate%</code> vs.&nbsp;<code>average_ride_fare</code> plots. In the second part, however, such a characteristic is gone.</p>
<p>One speculation is that pricing in those distance buckets with fares in the middle range have not been adjusted correctly. In other words, snapp have not incentivized bikers appropriately.</p>
</section>
</section>
<section id="suggestions" class="level2">
<h2 class="anchored" data-anchor-id="suggestions">Suggestions</h2>
<p><strong>NOTE: The suggestions below are made under the assumption that changes in order prices do not affect the cost structure. Additionally, external factors are disregarded, which is far from realistic business environment and price theory.</strong></p>
<p><strong>Also, the analysis so far is based on the data generated in one day for the service type in a particular city. In general, we can’t conclude with a one-day data set.</strong></p>
<ul>
<li><p>The <code>fulfillment rate</code> in long distance buckets, especially with fewer requests, such as distances longer than 33 kilometers, is not very good. Despite of their higher average fares, we can increase the price as an incentive for riders to complete their orders. For example, in buckets 30-31 and 32-33 the average fare is higher than bucket with above-35 Kms (all three groups have similar number of rides). Prices should be increased with respect to distances, but not to the extent that makes us lose our orders.</p></li>
<li><p>Moderate distance buckets also suffer from low <code>accepted-to-offered</code> and <code>fulfillment rate</code> percentages. In these bins, number of requests surges comparing with the longer distances. Generally, the range of the average ride fare in these groups are in the middle. It could be helpful to increase price here too, but we should bear in mind that with the higher price, the number of requests are likely to drop and we need an optimized price here. Willingness-to-pay calculation, for instance, is able to give us a hint regarding the extent of price increases.</p></li>
<li><p>Finally, distance buckets with shorter paths are the most lucrative ones. Number of <code>requests</code> for these types of rides is much greater than others and if we assume 70% as an acceptable <code>fulfillment rate</code>, current price level seems right and no specific price action is needed. <code>Total Ride Fare</code> or <code>GMV</code> is its peak at these distance buckets because of high requests. This number is in direct relationship with requests (and rides) and price, so decreasing prices can lead to more requests and may cover more than the loss due to lower price. Such policy, though, must be conducted after more analysis of potential exploitation of the market.</p></li>
</ul>
</section>
</section>
<section id="ride-loss-calculation" class="level1">
<h1>2. Ride Loss Calculation</h1>
<p>Sometimes a technical problem arises and affects the creation or finishing of the orders. In these situations, business performance would drop, and some orders would be lost. One of the business team’s tasks is investigating how these issues affect the business. On June 8th, there was a technical issue, and bikers couldn’t accept the orders after 10 p.m., and the ride number dropped. In this question, you should calculate the number of rides we lost because of this issue. The table contains the performance of 2 regular days.</p>
<div class="cell" data-execution_count="36">
<div class="cell-output cell-output-display" data-execution_count="35">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">hour</th>
<th data-quarto-table-cell-role="th">requester</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">ride</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2022-06-06</td>
<td>19</td>
<td>4738</td>
<td>5826</td>
<td>3982</td>
<td>99</td>
<td>83</td>
<td>68</td>
<td>250652</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2022-06-06</td>
<td>20</td>
<td>4176</td>
<td>5155</td>
<td>3361</td>
<td>99</td>
<td>80</td>
<td>65</td>
<td>234125</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2022-06-06</td>
<td>21</td>
<td>3128</td>
<td>3860</td>
<td>2493</td>
<td>99</td>
<td>79</td>
<td>65</td>
<td>242016</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2022-06-06</td>
<td>22</td>
<td>1829</td>
<td>2272</td>
<td>1418</td>
<td>98</td>
<td>78</td>
<td>62</td>
<td>243427</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2022-06-06</td>
<td>23</td>
<td>897</td>
<td>1125</td>
<td>597</td>
<td>98</td>
<td>70</td>
<td>53</td>
<td>236650</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2022-06-07</td>
<td>19</td>
<td>4679</td>
<td>5676</td>
<td>3944</td>
<td>99</td>
<td>84</td>
<td>69</td>
<td>251826</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>2022-06-07</td>
<td>20</td>
<td>4169</td>
<td>5152</td>
<td>3359</td>
<td>99</td>
<td>80</td>
<td>65</td>
<td>233678</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>2022-06-07</td>
<td>21</td>
<td>3322</td>
<td>4189</td>
<td>2632</td>
<td>99</td>
<td>78</td>
<td>63</td>
<td>235927</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2022-06-07</td>
<td>22</td>
<td>2072</td>
<td>2664</td>
<td>1518</td>
<td>99</td>
<td>73</td>
<td>57</td>
<td>235840</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>2022-06-07</td>
<td>23</td>
<td>841</td>
<td>1043</td>
<td>531</td>
<td>96</td>
<td>69</td>
<td>51</td>
<td>237552</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>2022-06-08</td>
<td>19</td>
<td>4963</td>
<td>6055</td>
<td>4281</td>
<td>99</td>
<td>85</td>
<td>71</td>
<td>266712</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>2022-06-08</td>
<td>20</td>
<td>4246</td>
<td>5211</td>
<td>3510</td>
<td>99</td>
<td>82</td>
<td>67</td>
<td>252352</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>2022-06-08</td>
<td>21</td>
<td>3319</td>
<td>4105</td>
<td>2584</td>
<td>99</td>
<td>78</td>
<td>63</td>
<td>255681</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>2022-06-08</td>
<td>22</td>
<td>2123</td>
<td>2974</td>
<td>926</td>
<td>99</td>
<td>41</td>
<td>31</td>
<td>242414</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>2022-06-08</td>
<td>23</td>
<td>1158</td>
<td>1850</td>
<td>164</td>
<td>98</td>
<td>15</td>
<td>9</td>
<td>304116</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="comparing-the-days" class="level3">
<h3 class="anchored" data-anchor-id="comparing-the-days">Comparing the Days</h3>
<div class="cell" data-execution_count="37">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-37-output-1.png" width="605" height="455"></p>
</div>
</div>
<div class="cell" data-execution_count="38">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-38-output-1.png" width="605" height="455"></p>
</div>
</div>
<div class="cell" data-execution_count="39">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-39-output-1.png" width="600" height="455"></p>
</div>
</div>
<div class="cell" data-execution_count="40">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-40-output-1.png" width="588" height="455"></p>
</div>
</div>
<div class="cell" data-execution_count="41">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-41-output-1.png" width="623" height="455"></p>
</div>
</div>
<p>Before 10 p.m., the average fare on June 8th was consistently higher than the previous days, suggesting that each request’s contribution was above the requests on June 6th and 7th. This difference is intesified after 10 p.m. A deeper investigation is warranted to determine whether the higher average fares were as a result of technical issues and rides decrease or influenced by specific factors on that day.</p>
<p>It’s clear that, on average, on 6th and 7th of June, the ratio of accepted-to-offered before 10 p.m. are similar with its value on the 8th. However, after that hour, this ratio dropped significantly on June 8th. The average was 75.5% for the first two nights, but it dropped to 41% on the last night. Also, at 11 p.m, the average ratio was 69.6% and it dropped to 15% on the 8th!</p>
</section>
<section id="losses-calculations" class="level3">
<h3 class="anchored" data-anchor-id="losses-calculations">Losses Calculations</h3>
<p>The table below presents the average values for the relevant variables for the 6th and 7th days.</p>
<div class="cell" data-execution_count="42">
<div class="cell-output cell-output-display" data-execution_count="41">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">hour</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">ride</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>19</td>
<td>5751.0</td>
<td>3963.0</td>
<td>99.0</td>
<td>83.5</td>
<td>68.5</td>
<td>251239.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>20</td>
<td>5153.5</td>
<td>3360.0</td>
<td>99.0</td>
<td>80.0</td>
<td>65.0</td>
<td>233901.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>21</td>
<td>4024.5</td>
<td>2562.5</td>
<td>99.0</td>
<td>78.5</td>
<td>64.0</td>
<td>238971.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>22</td>
<td>2468.0</td>
<td>1468.0</td>
<td>98.5</td>
<td>75.5</td>
<td>59.5</td>
<td>239633.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>23</td>
<td>1084.0</td>
<td>564.0</td>
<td>97.0</td>
<td>69.5</td>
<td>52.0</td>
<td>237101.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>And for a better understanding, here is the data for the last day, June 8th:</p>
<div class="cell" data-execution_count="43">
<div class="cell-output cell-output-display" data-execution_count="42">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">hour</th>
<th data-quarto-table-cell-role="th">request</th>
<th data-quarto-table-cell-role="th">ride</th>
<th data-quarto-table-cell-role="th">offered_created%</th>
<th data-quarto-table-cell-role="th">accepted_offered%</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%</th>
<th data-quarto-table-cell-role="th">average_ride_fare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>19</td>
<td>6055</td>
<td>4281</td>
<td>99</td>
<td>85</td>
<td>71</td>
<td>266712</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>20</td>
<td>5211</td>
<td>3510</td>
<td>99</td>
<td>82</td>
<td>67</td>
<td>252352</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>21</td>
<td>4105</td>
<td>2584</td>
<td>99</td>
<td>78</td>
<td>63</td>
<td>255681</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>22</td>
<td>2974</td>
<td>926</td>
<td>99</td>
<td>41</td>
<td>31</td>
<td>242414</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>23</td>
<td>1850</td>
<td>164</td>
<td>98</td>
<td>15</td>
<td>9</td>
<td>304116</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Next, the two tables are merged together to enable further calculations (67J is derived from the table including the 6th and 7th of June, while 8J corresponds to the table of the 8th):</p>
<div class="cell" data-execution_count="44">
<div class="cell-output cell-output-display" data-execution_count="43">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">hour</th>
<th data-quarto-table-cell-role="th">request67J</th>
<th data-quarto-table-cell-role="th">ride67J</th>
<th data-quarto-table-cell-role="th">accepted_offered%67J</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%67J</th>
<th data-quarto-table-cell-role="th">average_ride_fare67J</th>
<th data-quarto-table-cell-role="th">request8J</th>
<th data-quarto-table-cell-role="th">ride8J</th>
<th data-quarto-table-cell-role="th">accepted_offered%8J</th>
<th data-quarto-table-cell-role="th">fulfillment_rate%8J</th>
<th data-quarto-table-cell-role="th">average_ride_fare8J</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>19</td>
<td>5751.0</td>
<td>3963.0</td>
<td>83.5</td>
<td>68.5</td>
<td>251239.0</td>
<td>6055</td>
<td>4281</td>
<td>85</td>
<td>71</td>
<td>266712</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>20</td>
<td>5153.5</td>
<td>3360.0</td>
<td>80.0</td>
<td>65.0</td>
<td>233901.5</td>
<td>5211</td>
<td>3510</td>
<td>82</td>
<td>67</td>
<td>252352</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>21</td>
<td>4024.5</td>
<td>2562.5</td>
<td>78.5</td>
<td>64.0</td>
<td>238971.5</td>
<td>4105</td>
<td>2584</td>
<td>78</td>
<td>63</td>
<td>255681</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>22</td>
<td>2468.0</td>
<td>1468.0</td>
<td>75.5</td>
<td>59.5</td>
<td>239633.5</td>
<td>2974</td>
<td>926</td>
<td>41</td>
<td>31</td>
<td>242414</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>23</td>
<td>1084.0</td>
<td>564.0</td>
<td>69.5</td>
<td>52.0</td>
<td>237101.0</td>
<td>1850</td>
<td>164</td>
<td>15</td>
<td>9</td>
<td>304116</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Next, we subtract the actual number of rides from the expected value, which is derived from the average of previous days:</p>
<div class="cell" data-execution_count="45">
<div class="cell-output cell-output-display" data-execution_count="44">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">hour</th>
<th data-quarto-table-cell-role="th">expected_accepted</th>
<th data-quarto-table-cell-role="th">expected_ride</th>
<th data-quarto-table-cell-role="th">loss_rides</th>
<th data-quarto-table-cell-role="th">average_ride_fare8J</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>22</td>
<td>2245.37</td>
<td>1770.0</td>
<td>844.0</td>
<td>242414</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>23</td>
<td>1285.75</td>
<td>962.0</td>
<td>798.0</td>
<td>304116</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The question asked about the number of rides lost because of the technical issue. Nevertheless, an estimation of revenue loss could also offer valuable insights. Ultimately, the calculation for revenue loss is as follows:</p>
<div class="cell" data-execution_count="46">
<div class="cell-output cell-output-display" data-execution_count="45">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">hour</th>
<th data-quarto-table-cell-role="th">loss_rides</th>
<th data-quarto-table-cell-role="th">revenue_loss_million</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>22</td>
<td>844.0</td>
<td>429.072780</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>23</td>
<td>798.0</td>
<td>292.559592</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>NOTE: In calculating revenue loss, I’ve assumed that the average ride fare would not have changed significantly if the technical issue hadn’t occurred.</strong></p>
</section>
</section>
<section id="price-monitoring" class="level1">
<h1>3. Price Monitoring</h1>
<p>The whole logic of box pricing is to match the demand and supply. The business performs well, and supply and demand are balanced when the price has been set correctly. We do real-time monitoring to ensure sound business performance and change prices whenever needed. The business would be at its best when the Accepted-Order to Offered-Order ratio is between 75% and 80%. These tables represent a snapshot of city A’s real-time data at 17:30. We defined 19 areas in this city, which are coded. In this question, tell us what price action is needed to improve the business performance at 17:30.</p>
<p><strong>NOTE: Considering that Area Code 127 and 128 have notably high numbers of requests, it makes sense to consider them as outliers. Therefore, changing the center in the first heatmap to the median number of requests is a more robust approach.</strong></p>
<div class="cell" data-execution_count="48">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-48-output-1.png" width="573" height="455"></p>
</div>
</div>
<div class="cell" data-execution_count="49">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-49-output-1.png" width="573" height="455"></p>
</div>
</div>
<p>An more compeling heatmap shows the magnitude of deviation from our preferable range. In the next figure, direction and magnitude of deviation from the desired range is demonstrated. Those cells containing value of 0 represent acceptable percentage.</p>
<div class="cell" data-execution_count="50">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-50-output-1.png" width="575" height="455"></p>
</div>
</div>
<p>Areas 111, 114, 115, 116, 118, 121, 123, 124, and 126 have deviated more frequently and with higher percentage points than other areas. Pricing policies must be modified to achieve a more stable and favorable percentage.</p>
<div class="cell" data-execution_count="51">
<div class="cell-output cell-output-display">
<p><img src="Pricing-Data-Analysis_files/figure-html/cell-51-output-1.png" width="573" height="455"></p>
</div>
</div>
<section id="recommending-price-actions" class="level3">
<h3 class="anchored" data-anchor-id="recommending-price-actions">Recommending Price Actions</h3>
<p>In the next section, I provide some suggestions that can contribute to the business performance based on the criterion given in the question. However, it’s imperative to take number of requests (demand) into account as increasing or decreasing prices impact directly on it.</p>
<section id="areas-112-113-117-119-120-125-127-and-128-high-requests" class="level4">
<h4 class="anchored" data-anchor-id="areas-112-113-117-119-120-125-127-and-128-high-requests">Areas 112, 113, 117, 119, 120, 125, 127, and 128 (High Requests)</h4>
<ul>
<li><p>We need to incentivize riders to accomplish the orders in areas that have large number of <code>requests</code> but low <code>rates of fulfillment</code>. For instance, Areas 117, 119, and 125 have shown potentials since they have more requets relatively. We can offer bikers a more proportion of fare as their commission (in case it would be possible) to gain a better <code>fulfillment rate</code>.</p></li>
<li><p>Considering the second table (Accepted Orders to Offered Orders) and our criterion for business performance, the ratio in Area 112 is in its desired range at 17 o’clock, so no price action is needed. Areas 113 and 127 have larger than desired ratio, and this means we should make other areas more attractive to bikers. Areas 117, 119 and 125 are suffering from low percentage so that increasing prices can be beneficial (117 and 119 are in more critical situations).</p></li>
<li><p>Areas 120, 125, and 128 are so close to the desired range according to the tables above. Their previous hours trend don’t show too much volatility as well. Therefore, it’s recommended not to change prices in these areas.</p></li>
</ul>
</section>
<section id="areas-110-111-114-115-116-118-121-122-123-124-126-low-requests" class="level4">
<h4 class="anchored" data-anchor-id="areas-110-111-114-115-116-118-121-122-123-124-126-low-requests">Areas 110, 111, 114, 115, 116, 118, 121, 122, 123, 124, 126 (Low Requests)</h4>
<ul>
<li><p>Ratios in some areas are far below the desired range, but the fact that these areas have received few requests means we should not conclude to increase prices immediately. In fact, one of the reasons why the number of requests is insignificant in these regions may be their high prices. If we had historical information about these areas and their demographic characteristics, we would be more confident in judging if we are attracting suboptimal requests and high pricing is an issue. We assume number of orders are in their natural range.</p></li>
<li><p>Areas 110 and 114 have <code>accepted-to-offered</code> percentage above the desired range, so we can increase prices in other areas as a nudge for riders to accept orders in those regions rather than in these two.</p></li>
<li><p>The remaining areas need to have more acceptance rates. Areas 115, 121, 123, and 125 should be taken care of as they have a very low percentage at 17. But again, we would also be better off to increase the commission proportion in favor of riders as <code>fulfillment rate</code> is poor. We must remember that prices leads to even lower requests, and the company should seek an optimal increase.</p></li>
<li><p>Areas 115 and 122 have a <code>fulfillment rate</code> of 0 at 17 o’clock! In other words, those few requests haven’t been delivered at all. Area codes 111, 116, 118, 121, 123 and 126 have rates less than or equal to 50%. Area 123, in specific, is doing poorly throughout the day in this matter. <code>accepted-to-offered</code> in area 122 didn’t meet the desired level at 12, 13, and 14, and at 16, there was just one request. It might be more reasonable to raise prices to make it more attractive in this area.</p></li>
<li><p><code>accepted-to-offered</code> in area 124 has been somewhat unstable throughout these hours, but now reached its acceptable level. We don’t change pricing in this area.</p></li>
</ul>
</section>
</section>
<section id="missing-values" class="level3">
<h3 class="anchored" data-anchor-id="missing-values">Missing Values</h3>
<p>In all three tables we see no values for some area codes at some hours during the day. Missing values should always be taken serious and neglecting them could mislead our conclusions.</p>
<ul>
<li><p>In table 2, the <code>accepted-to-offered</code> of area code 123 are missed from 13 to 16 and we only have 2 values (33%) at 12 and 17. We have to stick to the most recent here, but if previous days data existed, we could impute missing values in order to analyze and decide with greater precision. Nonetheless, we know that in this area we have a handful number of requests that are more likely not to delivered (based on fulfillment rate table).</p></li>
<li><p>Since there is no value available for accepted-to-offered orders in Area 122 at 17 o’clock, our decision must rely on the data from 16 o’clock.</p></li>
</ul>
</section>
</section>
<section id="price-test" class="level1">
<h1>4. Price Test</h1>
<p>We increased the price of service type 1 in 6 of our cities for two days to test the effect of this change on business. You can see the business parameter changes caused by the price change. What’s your analysis of the test result based on this data? Should we increase our prices in these cities? Explain your answer.</p>
<p>Note:</p>
<ul>
<li><p>We can count the number of users that get the price (checker) and the total number of this action (check).</p></li>
<li><p>Price Conversion: The ratio of the users who submit the orders to those who get the prices.</p></li>
<li><p>GMV: Gross Merchandise Value. (The sum of the rides price)</p></li>
</ul>
<div class="cell" data-execution_count="54">
<div class="cell-output cell-output-display" data-execution_count="53">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">City</th>
<th data-quarto-table-cell-role="th">Test Day</th>
<th data-quarto-table-cell-role="th">Request</th>
<th data-quarto-table-cell-role="th">Ride</th>
<th data-quarto-table-cell-role="th">Price Conversion</th>
<th data-quarto-table-cell-role="th">Accepted-Order / Offered-Order%</th>
<th data-quarto-table-cell-role="th">Fullfillment Rate%</th>
<th data-quarto-table-cell-role="th">GMV</th>
<th data-quarto-table-cell-role="th">Average Fare Per KM</th>
<th data-quarto-table-cell-role="th">Ride Per Check</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>City 1</td>
<td>Test Day 1</td>
<td>-6%</td>
<td>-1%</td>
<td>-1%</td>
<td>2%</td>
<td>3%</td>
<td>3%</td>
<td>6%</td>
<td>1%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>City 1</td>
<td>Test Day 2</td>
<td>-2%</td>
<td>2%</td>
<td>-1%</td>
<td>1%</td>
<td>3%</td>
<td>4%</td>
<td>3%</td>
<td>1%</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>City 2</td>
<td>Test Day 1</td>
<td>-5%</td>
<td>-4%</td>
<td>-1%</td>
<td>0%</td>
<td>0%</td>
<td>-3%</td>
<td>1%</td>
<td>-1%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>City 2</td>
<td>Test Day 2</td>
<td>-2%</td>
<td>-5%</td>
<td>-4%</td>
<td>-1%</td>
<td>-2%</td>
<td>9%</td>
<td>12%</td>
<td>-1%</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>City 3</td>
<td>Test Day 1</td>
<td>-4%</td>
<td>-5%</td>
<td>0%</td>
<td>-2%</td>
<td>-1%</td>
<td>-7%</td>
<td>1%</td>
<td>-1%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>City 3</td>
<td>Test Day 2</td>
<td>-3%</td>
<td>-3%</td>
<td>-2%</td>
<td>0%</td>
<td>0%</td>
<td>-2%</td>
<td>3%</td>
<td>0%</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>City 4</td>
<td>Test Day 1</td>
<td>-5%</td>
<td>3%</td>
<td>1%</td>
<td>5%</td>
<td>5%</td>
<td>1%</td>
<td>1%</td>
<td>1%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>City 4</td>
<td>Test Day 2</td>
<td>-4%</td>
<td>-1%</td>
<td>-1%</td>
<td>2%</td>
<td>2%</td>
<td>-3%</td>
<td>1%</td>
<td>0%</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>City 5</td>
<td>Test Day 1</td>
<td>-8%</td>
<td>-4%</td>
<td>-1%</td>
<td>4%</td>
<td>2%</td>
<td>14%</td>
<td>20%</td>
<td>0%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>City 5</td>
<td>Test Day 2</td>
<td>-9%</td>
<td>2%</td>
<td>-2%</td>
<td>7%</td>
<td>7%</td>
<td>5%</td>
<td>7%</td>
<td>1%</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>City 6</td>
<td>Test Day 1</td>
<td>-2%</td>
<td>-4%</td>
<td>-1%</td>
<td>-2%</td>
<td>-1%</td>
<td>-8%</td>
<td>-4%</td>
<td>0%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>City 6</td>
<td>Test Day 2</td>
<td>-6%</td>
<td>-7%</td>
<td>-1%</td>
<td>-2%</td>
<td>-1%</td>
<td>-1%</td>
<td>-5%</td>
<td>-1%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="data-description" class="level3">
<h3 class="anchored" data-anchor-id="data-description">Data Description</h3>
<ul>
<li><p><code>Request</code> has decreased in all cities and both days and this change direction was expected according to the downward demand curve. But this measure is not our criteria by itself and we’ll conclude after analysis of other variables.</p></li>
<li><p><code>Ride</code> column is lower than before in most cities and days since the number of requests decreased.</p></li>
<li><p><code>Price Conversion</code> also declined in almost all cities in both days except City 3 Day 1 and City 4 day 1. In other words, the probability of submiting an order after seeing the price deacreased too. Higher prices and lower <code>requests</code> led to these relative changes.</p></li>
<li><p><code>Accepted-to-Offered</code> ratios increased in City 1, 4, and 5 on both days. The most significant surge in <code>Accepted-to-Offered</code> ratios was observed in City 5. On the other hand, Cities 2, 3, and 6 experienced a decrease in their ratios. This ratio naturally comprises two components: the numerator and the denominator. In Cities 1, 4, and 5, price increases have resulted in higher acceptance probabilities among riders due to the enhanced incentives offered by the higher prices. Additionally, the denominator has decreased due to fewer requests and, consequently, fewer offers. Looking at changes of <code>GMV</code> column can be helpful to see which effect is stronger. In cities 1 and 5 we earned more money so that the former effect is dominating, but in city 4 the latter seems to be larger.</p></li>
<li><p><code>Fulfillment Rate%</code> represents the percentage of orders or requests that have been delivered, so its change direction and its magnitude can be predicted out of changes in <code>Request</code> and <code>Ride</code> columns. Generally, in cities 1, 4, and 5 this ratio is greater than before implying that the number of rides didn’t plummet to the extent of falling in requests. In other cities, the negative direction means the number of rides deacresed even more than requests.</p></li>
<li><p><code>GMV</code> is arguably one of the most vital factors for any business, as it indicates the company’s earnings, despite other considerations that must be taken into account alongside it. This table exhibited a significant increase in City 5 for both days. City 1 also showed growth albeit with a relatively smaller percentage point increase. City 6, however, experienced revenue loss on both days, which, in conjunction with other data, suggests that the new pricing strategy is not performing well there. The situation in City 3 is also not promising from a GMV perspective. Cities 2 and 4 have more intricate scenarios. City 2 incurred a 3 percent GMV loss on the first day, followed by a 9 percent growth on the second day. City 4, conversely, gained 1 percent more GMV but experienced a 3 percent decline on the second day. Further data is required to attain a more confident assessment in this regard.</p></li>
<li><p>It’s supposed to see that <code>Average Fare per KM</code> rises because of the increase in price levels and the lower levels of <code>requests</code> and <code>rides</code>. In City 6, though, it’s strange to see drops in this variable. One explanation is that although the number of <code>Requests</code> and <code>Ride</code> dropped, the aggregated distance covered by bikers has reached a higher level than before.</p></li>
<li><p><code>Ride Per Check</code> is calculated by dividing <code>Ride</code> by the number of <code>Check</code>, which counts how many times customers have viewed the price. In certain cities and days, although the <code>Ride</code> count has decreased, the <code>Ride Per Check</code> has increased compared to the benchmark day. This is attributed to the reduced number of <code>Check</code> instances more than <code>Ride</code>.</p></li>
</ul>
</section>
<section id="aggregated-values" class="level3">
<h3 class="anchored" data-anchor-id="aggregated-values">Aggregated Values</h3>
<p>Now, I remove percentage sign from all values to have a dataframe having numeric columns. Then, I try to calculate aggregated values and see if any further analysis can be done.</p>
<p>The following table is produced by taking the average numbers for each city:</p>
<div class="cell" data-execution_count="55">
<div class="cell-output cell-output-display" data-execution_count="54">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Request</th>
<th data-quarto-table-cell-role="th">Ride</th>
<th data-quarto-table-cell-role="th">Price Conversion</th>
<th data-quarto-table-cell-role="th">Accepted-Order / Offered-Order%</th>
<th data-quarto-table-cell-role="th">Fullfillment Rate%</th>
<th data-quarto-table-cell-role="th">GMV</th>
<th data-quarto-table-cell-role="th">Average Fare Per KM</th>
<th data-quarto-table-cell-role="th">Ride Per Check</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">City</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">City 1</td>
<td>-4.0</td>
<td>0.5</td>
<td>-1.0</td>
<td>1.5</td>
<td>3.0</td>
<td>3.5</td>
<td>4.5</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">City 2</td>
<td>-3.5</td>
<td>-4.5</td>
<td>-2.5</td>
<td>-0.5</td>
<td>-1.0</td>
<td>3.0</td>
<td>6.5</td>
<td>-1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">City 3</td>
<td>-3.5</td>
<td>-4.0</td>
<td>-1.0</td>
<td>-1.0</td>
<td>-0.5</td>
<td>-4.5</td>
<td>2.0</td>
<td>-0.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">City 4</td>
<td>-4.5</td>
<td>1.0</td>
<td>0.0</td>
<td>3.5</td>
<td>3.5</td>
<td>-1.0</td>
<td>1.0</td>
<td>0.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">City 5</td>
<td>-8.5</td>
<td>-1.0</td>
<td>-1.5</td>
<td>5.5</td>
<td>4.5</td>
<td>9.5</td>
<td>13.5</td>
<td>0.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">City 6</td>
<td>-4.0</td>
<td>-5.5</td>
<td>-1.0</td>
<td>-2.0</td>
<td>-1.0</td>
<td>-4.5</td>
<td>-4.5</td>
<td>-0.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>From this perspective and according to <code>GMV</code>, new price action generates more revenues in cities 1, 2, and 5. In other cities, the company incurred financial losses.</p>
</section>
<section id="final-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h3>
<ul>
<li><p>We should increase prices in city 1 based on the fact that we gained more money than before because our bikers accepted and fulfilled more requests leading to more GMV.</p></li>
<li><p>In city 2, we saw lower requests have been accepted, and GMV fell in the first day, but in the second day, a sharp increase is seen. Ride per Check decreased meaning that either the number of checks is going upward or its decrease is not as much as rides, which is a not good thing, and because price conversion and ride numbers hurt badly, we don’t recommend increasing prices.</p></li>
<li><p>In city 3, bikers are more reluctant accepting their offers compared to the benchmark day. We lost our gross revenue and it’s not recommended to continuing new price action.</p></li>
<li><p>In city 4, we can infer that the times customers get our prices (check) is less than before and the probability of conversion is better. Although we lost money on day 2, increasing prices might be beneficial in the future.</p></li>
<li><p>We should increase prices in city 5 due to its promising relative changes.</p></li>
<li><p>We should not increase prices in city 6 as the number of requests, rides, probability of acceptance, and most importantly, GMV is declining.</p></li>
</ul>
</section>
<section id="a-more-elaborate-methodology" class="level3">
<h3 class="anchored" data-anchor-id="a-more-elaborate-methodology">A More Elaborate Methodology</h3>
<p>The data points in this data set are not sufficient to make an informed decision. In case we had more records, we could utilize some more complicated but precise methods. Econometrics provides valuable tools for scientifically measuring the effects of changes the company makes on other business metrics, such as <code>GMV</code>. One of these tools is the difference-in-difference method.</p>
<p>To employ the diff-in-diff approach, we would require more data points across various days before and after the change. This method assumes that there are parallel trends in the targeted metrics across different days for various cities. By using linear regression, we can more accurately determine whether the new prices are beneficial in each city.”</p>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb3" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Pricing Data Analysis"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Iman Mousavi"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2023-08-17"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: false</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">  cache: true</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="an">toc-title:</span><span class="co"> Sections</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="an">theme:</span><span class="co"> theme.scss</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> show</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="an">highlight-style:</span><span class="co"> github</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="al">![](Pricing-Data-Analysis_files/snapp-logo.png)</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1. Distance Bucket</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>When a customer submits an order, its data is logged in the “Order Table“. Then this order is offered to bikers. This data is stored in the “Offer Table,” and it means that an order is offered to “Biker ID” at the “created_at” moment, and when a “Biker ID” accepts to deliver that order, its data is stored in the “Allotment Table.”</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>The amount a customer pays is called “Fare,” The distance between the source and destination is called “Distance” in “The invoice Table“.</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>When an order is successfully finished, the “Status” field in the “Order Table” is “Delivered,” and when it fails to be completed, the “Status” field is “Canceled.”</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>“Ride” means a successfully finished ride, and “Request” means orders that customers create.</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>What's your analysis of the pricing in this city? What are your suggestions to maximize the ride numbers? </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.ticker <span class="im">import</span> FuncFormatter</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>distance_buckets <span class="op">=</span> pd.read_csv(<span class="st">'Snapp Distance Bucket.csv'</span>, parse_dates<span class="op">=</span>[<span class="st">'Created Date'</span>])</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Cleaning</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>First few rows of the data set are as follows:</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>distance_buckets.head()</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="in">`City`</span>, <span class="in">`Service Type`</span>, and <span class="in">`Created Date`</span> contain no useful information due to the prefiltering process. These columns maintain a constant presence throughout the dataset. Additionally, the final row in the Excel sheet should be removed here.</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>distance_buckets.drop(columns<span class="op">=</span>[<span class="st">'City'</span>, <span class="st">'Service Type'</span>, <span class="st">'Created Date'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>distance_buckets.drop(distance_buckets.index[<span class="op">-</span><span class="dv">1</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>Given the non-standard format of the column names, I have standardized them for better readability and compatibility with Python conventions.</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>distance_buckets.columns <span class="op">=</span> distance_buckets.columns.<span class="bu">str</span>.lower().<span class="bu">str</span>.replace(<span class="st">' '</span>, <span class="st">'_'</span>)</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>distance_buckets.rename(columns<span class="op">=</span>{<span class="st">'distance_buckets(km)'</span>:<span class="st">'dist_buck'</span>, <span class="st">'total_ride_fare(gmv)(irr)'</span>:<span class="st">'tot_ride_fare'</span>, <span class="st">'_offered-order_/_created-order_%'</span>:<span class="st">'offered_created%'</span>, <span class="st">'accepted-order_/_offered-order%'</span>:<span class="st">'accepted_offered%'</span>, <span class="st">'fullfillment_rate%'</span>:<span class="st">'fulfillment_rate%'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(distance_buckets.columns)</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>The presence of the '%' sign has led to three ratio columns having an 'object' data type, which is inaccurate and complicates their analysis.</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>prct_cols <span class="op">=</span> [<span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>]</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>distance_buckets[prct_cols] <span class="op">=</span> distance_buckets[prct_cols].applymap(<span class="kw">lambda</span> x: <span class="bu">int</span>(x.strip(<span class="st">'%'</span>)))</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>Checking data types:</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>distance_buckets.info()</span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>The column <span class="in">`Average Ride Fare`</span> is currently of the 'object' data type, indicating that it hasn't been stored as a numeric column. This is likely due to the inclusion of commas to enhance digit readability. However, to transform the column into a numeric format, I will remove the commas.</span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>distance_buckets[<span class="st">'average_ride_fare'</span>] <span class="op">=</span> distance_buckets[<span class="st">'average_ride_fare'</span>].<span class="bu">str</span>.replace(<span class="st">','</span>, <span class="st">''</span>).astype(<span class="st">'int'</span>)</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a><span class="fu">## EDA</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>Exploratory Data Analysis helps us to obtain a general understanding of data and answer to valuable questions along the way.</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a><span class="fu">### Request</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>As the initial step, let's examine the <span class="in">`request`</span> column to identify the distance buckets that are more commonly favored.</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>distance_buckets.sort_values(<span class="st">'request'</span>, ascending<span class="op">=</span><span class="va">False</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>]].head(<span class="dv">10</span>)</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>A significant portion of the requests are associated with shorter distances, specifically those less than 10 kilometers.</span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>A histogram can provide a more insightful perspective into the distribution of these bins.</span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the font family and size</span></span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'font.family'</span>] <span class="op">=</span> <span class="st">'Roboto'</span>  </span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'font.size'</span>] <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>col_green_plt <span class="op">=</span> <span class="st">'#028239'</span></span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">1500</span>, <span class="dv">200</span>)</span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a>sns.histplot(x <span class="op">=</span> <span class="st">'request'</span>, data <span class="op">=</span> distance_buckets, bins<span class="op">=</span>bins, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Request'</span>)</span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Request Histogram'</span>)</span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a>plt.xticks(bins)</span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">2</span>))</span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-150"><a href="#cb3-150" aria-hidden="true" tabindex="-1"></a>The majority of distance buckets contain fewer than 200 requests. However, as observed earlier, certain bins exhibit a considerably higher volume of requests.</span>
<span id="cb3-151"><a href="#cb3-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a>To gain a better understanding of distance buckets with fewer than 200 requests, I've generated the following pandas dataframe:</span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-156"><a href="#cb3-156" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-157"><a href="#cb3-157" aria-hidden="true" tabindex="-1"></a>distance_buckets[distance_buckets[<span class="st">'request'</span>] <span class="op">&lt;</span> <span class="dv">200</span>].sort_values(<span class="st">'request'</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>]].head(<span class="dv">10</span>)</span>
<span id="cb3-158"><a href="#cb3-158" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-159"><a href="#cb3-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-160"><a href="#cb3-160" aria-hidden="true" tabindex="-1"></a>Evidently, there is a significant decline in the number of customer orders for longer distances.  </span>
<span id="cb3-161"><a href="#cb3-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-162"><a href="#cb3-162" aria-hidden="true" tabindex="-1"></a><span class="fu">### Offered to Created Percentage</span></span>
<span id="cb3-163"><a href="#cb3-163" aria-hidden="true" tabindex="-1"></a>The subsequent table is arranged in descending order based on the percentage of Offered Orders to Created Orders:</span>
<span id="cb3-166"><a href="#cb3-166" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a>distance_buckets.sort_values(<span class="st">'offered_created%'</span>, ascending<span class="op">=</span><span class="va">False</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>]].head(<span class="dv">10</span>)</span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a>Greater distances are more likely to be offered completely. The histogram is plotted next:</span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.arange(<span class="dv">70</span>, <span class="dv">105</span>, <span class="dv">5</span>)</span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a>sns.histplot(x <span class="op">=</span> <span class="st">'offered_created%'</span>, data <span class="op">=</span> distance_buckets, bins <span class="op">=</span> bins, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Offered Orders to Created Orders %'</span>)</span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Offered to Created Orders Percentage Histogram'</span>)</span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="dv">24</span>, <span class="dv">2</span>))</span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a>A total of 22 distance buckets have exhibited an <span class="in">`Offered to Created Orders`</span> ratio surpassing 95%.</span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a>There are a few buckets with notably low values of this ratio, falling below 80%. The subsequent dataframe identifies these specific buckets.</span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a>distance_buckets[distance_buckets[<span class="st">'offered_created%'</span>] <span class="op">&lt;</span> <span class="dv">80</span>][[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>, <span class="st">'average_ride_fare'</span>]]</span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a>While the requests within these buckets might not immediately stand out, their <span class="in">`average ride fare`</span> implies a significant value associated with these requests.</span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a><span class="fu">### Accepted to Offered Percentage</span></span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a>To determine the proportion of accepted offers for bikers across different distance buckets, we can once more utilize a histogram to visualize the distribution of the <span class="in">`accepted_offered%`</span> values. This will provide us with a comprehensive view of the data.</span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-202"><a href="#cb3-202" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.arange(<span class="dv">30</span>, <span class="dv">105</span>, <span class="dv">10</span>)</span>
<span id="cb3-203"><a href="#cb3-203" aria-hidden="true" tabindex="-1"></a>sns.histplot(x <span class="op">=</span> <span class="st">'accepted_offered%'</span>, data <span class="op">=</span> distance_buckets, bins <span class="op">=</span> bins, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-204"><a href="#cb3-204" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Accepted Orders to Offered Orders %'</span>)</span>
<span id="cb3-205"><a href="#cb3-205" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="dv">14</span>, <span class="dv">2</span>))</span>
<span id="cb3-206"><a href="#cb3-206" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Accepted to Offered Orders Percentage Histogram'</span>)</span>
<span id="cb3-207"><a href="#cb3-207" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-208"><a href="#cb3-208" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-209"><a href="#cb3-209" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-210"><a href="#cb3-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-211"><a href="#cb3-211" aria-hidden="true" tabindex="-1"></a>The majority of distance buckets exhibit an <span class="in">`accepted-to-offered`</span> percentage ranging between 50 and 60. Nonetheless, there exist certain buckets with ratios lower than 50%. To gain a deeper understanding, let's investigate and identify the distance buckets with percentages less than 60, arranging them in ascending order.</span>
<span id="cb3-212"><a href="#cb3-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-215"><a href="#cb3-215" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-216"><a href="#cb3-216" aria-hidden="true" tabindex="-1"></a>distance_buckets[distance_buckets[<span class="st">'accepted_offered%'</span>] <span class="op">&lt;</span> <span class="dv">60</span>].sort_values(<span class="st">'accepted_offered%'</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'accepted_offered%'</span>, <span class="st">'average_ride_fare'</span>]]</span>
<span id="cb3-217"><a href="#cb3-217" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-218"><a href="#cb3-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-219"><a href="#cb3-219" aria-hidden="true" tabindex="-1"></a>Moderate distance buckets are more prone to get accepted with lower probability. **We need to concentrate on these distance buckets if our intention is to raise ride numbers.**</span>
<span id="cb3-220"><a href="#cb3-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-221"><a href="#cb3-221" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fulfillment Percentage</span></span>
<span id="cb3-222"><a href="#cb3-222" aria-hidden="true" tabindex="-1"></a>This ratio holds valuable information as well, indicating the percentage of requests that have been fulfilled entirely. As a first step, let's examine its histogram to gain insights into its distribution.</span>
<span id="cb3-223"><a href="#cb3-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-226"><a href="#cb3-226" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-227"><a href="#cb3-227" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.arange(<span class="dv">20</span>, <span class="dv">105</span>, <span class="dv">10</span>)</span>
<span id="cb3-228"><a href="#cb3-228" aria-hidden="true" tabindex="-1"></a>sns.histplot(x <span class="op">=</span> <span class="st">'fulfillment_rate%'</span>, data <span class="op">=</span> distance_buckets, bins <span class="op">=</span> bins, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-229"><a href="#cb3-229" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Fulfillment Rate %'</span>)</span>
<span id="cb3-230"><a href="#cb3-230" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Fulfillment Rate Histogram'</span>)</span>
<span id="cb3-231"><a href="#cb3-231" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-232"><a href="#cb3-232" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-233"><a href="#cb3-233" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-234"><a href="#cb3-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-235"><a href="#cb3-235" aria-hidden="true" tabindex="-1"></a>21 distance buckets have fullfillment rate lower than 50. Here are those buckets sorted by the ratio in ascending order:</span>
<span id="cb3-236"><a href="#cb3-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-239"><a href="#cb3-239" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-240"><a href="#cb3-240" aria-hidden="true" tabindex="-1"></a>dist_lfr <span class="op">=</span> distance_buckets[distance_buckets[<span class="st">'fulfillment_rate%'</span>] <span class="op">&lt;</span> <span class="dv">50</span>].sort_values(<span class="st">'fulfillment_rate%'</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>, <span class="st">'average_ride_fare'</span>]]</span>
<span id="cb3-241"><a href="#cb3-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-242"><a href="#cb3-242" aria-hidden="true" tabindex="-1"></a>dist_lfr</span>
<span id="cb3-243"><a href="#cb3-243" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-244"><a href="#cb3-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-245"><a href="#cb3-245" aria-hidden="true" tabindex="-1"></a>Moderate to long distances have exhibited lower rates of fulfillment, and the reasons underlying this phenomenon should be investigated. It's imperative to distinguish between buckets with only a few requests and those with a more considerable number. I need criteria to judge whether a distance bucket has a low number of requests or not, and to achieve this, I will use the first quarter of requests across the buckets.</span>
<span id="cb3-246"><a href="#cb3-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-249"><a href="#cb3-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-250"><a href="#cb3-250" aria-hidden="true" tabindex="-1"></a>dist_lr_lfr <span class="op">=</span> dist_lfr[dist_lfr[<span class="st">'request'</span>] <span class="op">&lt;=</span> distance_buckets[<span class="st">'request'</span>].quantile(<span class="fl">0.25</span>)]</span>
<span id="cb3-251"><a href="#cb3-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-252"><a href="#cb3-252" aria-hidden="true" tabindex="-1"></a>dist_md_lfr <span class="op">=</span> dist_lfr[dist_lfr[<span class="st">'request'</span>] <span class="op">&gt;</span> distance_buckets[<span class="st">'request'</span>].quantile(<span class="fl">0.25</span>)]</span>
<span id="cb3-253"><a href="#cb3-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-254"><a href="#cb3-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-255"><a href="#cb3-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-256"><a href="#cb3-256" aria-hidden="true" tabindex="-1"></a>Distance bukcets with low number of requests are:</span>
<span id="cb3-257"><a href="#cb3-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-260"><a href="#cb3-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-261"><a href="#cb3-261" aria-hidden="true" tabindex="-1"></a>dist_lr_lfr[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>, <span class="st">'average_ride_fare'</span>]]</span>
<span id="cb3-262"><a href="#cb3-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-263"><a href="#cb3-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-264"><a href="#cb3-264" aria-hidden="true" tabindex="-1"></a>The above table consists of distance buckets with almost the longest paths implying that only a few requests want to send their packages in this range of KMs. </span>
<span id="cb3-265"><a href="#cb3-265" aria-hidden="true" tabindex="-1"></a>It's recommended to have an estimate of potential orders in each distance buckets via marketing research methods. It would clarify high prices cause the low number of requests or it's just normal for long paths.</span>
<span id="cb3-266"><a href="#cb3-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-267"><a href="#cb3-267" aria-hidden="true" tabindex="-1"></a>And those with more normal number of requests are:</span>
<span id="cb3-268"><a href="#cb3-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-271"><a href="#cb3-271" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-272"><a href="#cb3-272" aria-hidden="true" tabindex="-1"></a>dist_md_lfr[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>, <span class="st">'average_ride_fare'</span>]]</span>
<span id="cb3-273"><a href="#cb3-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-274"><a href="#cb3-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-275"><a href="#cb3-275" aria-hidden="true" tabindex="-1"></a>On the other hand, let's take a look at the buckets with the most fulfillment percentages:</span>
<span id="cb3-276"><a href="#cb3-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-280"><a href="#cb3-280" aria-hidden="true" tabindex="-1"></a>distance_buckets.sort_values(<span class="st">'fulfillment_rate%'</span>, ascending<span class="op">=</span><span class="va">False</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>, <span class="st">'average_ride_fare'</span>]].head(<span class="dv">10</span>)</span>
<span id="cb3-281"><a href="#cb3-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-282"><a href="#cb3-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-283"><a href="#cb3-283" aria-hidden="true" tabindex="-1"></a>**Probability of delivering for shorter distances is higher than moderate and longer ones.**</span>
<span id="cb3-284"><a href="#cb3-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-285"><a href="#cb3-285" aria-hidden="true" tabindex="-1"></a><span class="fu">### Total and Average Ride Fare</span></span>
<span id="cb3-286"><a href="#cb3-286" aria-hidden="true" tabindex="-1"></a>Finally, let's delve into the distribution of these crucial numeric columns and explore the potential questions they might raise.</span>
<span id="cb3-287"><a href="#cb3-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-288"><a href="#cb3-288" aria-hidden="true" tabindex="-1"></a>**NOTE: the values turned to MillionIRR for conveniece.**</span>
<span id="cb3-289"><a href="#cb3-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-292"><a href="#cb3-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-293"><a href="#cb3-293" aria-hidden="true" tabindex="-1"></a>distance_buckets[<span class="st">'tot_ride_fare_mirr'</span>] <span class="op">=</span> distance_buckets[<span class="st">'tot_ride_fare'</span>] <span class="op">/</span> <span class="dv">1000000</span></span>
<span id="cb3-294"><a href="#cb3-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-295"><a href="#cb3-295" aria-hidden="true" tabindex="-1"></a>y_ticks <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">19</span>, <span class="dv">2</span>)</span>
<span id="cb3-296"><a href="#cb3-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-297"><a href="#cb3-297" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">130</span>, <span class="dv">20</span>)</span>
<span id="cb3-298"><a href="#cb3-298" aria-hidden="true" tabindex="-1"></a>sns.histplot(x <span class="op">=</span> <span class="st">'tot_ride_fare_mirr'</span>, data <span class="op">=</span> distance_buckets, bins<span class="op">=</span>bins, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-299"><a href="#cb3-299" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'GMV in Million'</span>)</span>
<span id="cb3-300"><a href="#cb3-300" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gross Merchandise Value Histogram'</span>)</span>
<span id="cb3-301"><a href="#cb3-301" aria-hidden="true" tabindex="-1"></a>plt.yticks(y_ticks)</span>
<span id="cb3-302"><a href="#cb3-302" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-303"><a href="#cb3-303" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-304"><a href="#cb3-304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-305"><a href="#cb3-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-306"><a href="#cb3-306" aria-hidden="true" tabindex="-1"></a>A total of 18 distance buckets yielded less than 20 MIRR (Metric for Income from Rides) on that specific day for service type 1. In contrast, 5 distance buckets generated substantial revenues. Let's identify both groups starting with those with low revenue:</span>
<span id="cb3-307"><a href="#cb3-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-310"><a href="#cb3-310" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-311"><a href="#cb3-311" aria-hidden="true" tabindex="-1"></a>distance_buckets[distance_buckets[<span class="st">'tot_ride_fare_mirr'</span>] <span class="op">&lt;</span> <span class="dv">20</span>].sort_values(<span class="st">'tot_ride_fare_mirr'</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>, <span class="st">'tot_ride_fare_mirr'</span>]]</span>
<span id="cb3-312"><a href="#cb3-312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-313"><a href="#cb3-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-314"><a href="#cb3-314" aria-hidden="true" tabindex="-1"></a>It's expected to have an acceptable amount of revenue in longer distances despite its lower requests. Lower rates of fulfillment, though, has prohibited that goal.  </span>
<span id="cb3-315"><a href="#cb3-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-316"><a href="#cb3-316" aria-hidden="true" tabindex="-1"></a>Next, those with higher revenue:</span>
<span id="cb3-319"><a href="#cb3-319" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-320"><a href="#cb3-320" aria-hidden="true" tabindex="-1"></a>distance_buckets[distance_buckets[<span class="st">'tot_ride_fare_mirr'</span>] <span class="op">&gt;=</span> <span class="dv">100</span>].sort_values(<span class="st">'tot_ride_fare_mirr'</span>, ascending<span class="op">=</span><span class="va">False</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>, <span class="st">'tot_ride_fare_mirr'</span>]]</span>
<span id="cb3-321"><a href="#cb3-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-322"><a href="#cb3-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-323"><a href="#cb3-323" aria-hidden="true" tabindex="-1"></a>To gain a deeper understanding of the fare amount, considering the average figures can also be insightful:</span>
<span id="cb3-324"><a href="#cb3-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-327"><a href="#cb3-327" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-328"><a href="#cb3-328" aria-hidden="true" tabindex="-1"></a>distance_buckets[<span class="st">'average_ride_fare_thsnds'</span>] <span class="op">=</span> distance_buckets[<span class="st">'average_ride_fare'</span>] <span class="op">/</span> <span class="dv">1000</span></span>
<span id="cb3-329"><a href="#cb3-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-330"><a href="#cb3-330" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.arange(<span class="dv">100</span>, <span class="dv">700</span> , <span class="dv">50</span>)</span>
<span id="cb3-331"><a href="#cb3-331" aria-hidden="true" tabindex="-1"></a>sns.histplot(x <span class="op">=</span> <span class="st">'average_ride_fare_thsnds'</span>, data <span class="op">=</span> distance_buckets, bins <span class="op">=</span> bins, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-332"><a href="#cb3-332" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Avg. Ride Fare'</span>)</span>
<span id="cb3-333"><a href="#cb3-333" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Ride Fare Histogram'</span>)</span>
<span id="cb3-334"><a href="#cb3-334" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-335"><a href="#cb3-335" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-336"><a href="#cb3-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-337"><a href="#cb3-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-338"><a href="#cb3-338" aria-hidden="true" tabindex="-1"></a>3 distance buckets appear to be more profitable having averages higher than 400000. In the following table, you can see which buckets have such averages:</span>
<span id="cb3-339"><a href="#cb3-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-342"><a href="#cb3-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-343"><a href="#cb3-343" aria-hidden="true" tabindex="-1"></a>distance_buckets[distance_buckets[<span class="st">'average_ride_fare_thsnds'</span>] <span class="op">&gt;=</span> <span class="dv">400</span>].sort_values(<span class="st">'average_ride_fare_thsnds'</span>)[[<span class="st">'dist_buck'</span>, <span class="st">'request'</span>, <span class="st">'ride'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>, <span class="st">'tot_ride_fare_mirr'</span>,<span class="st">'average_ride_fare'</span>]]</span>
<span id="cb3-344"><a href="#cb3-344" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-345"><a href="#cb3-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-346"><a href="#cb3-346" aria-hidden="true" tabindex="-1"></a>Indeed, it's evident that longer distances with fewer requests tend to yield higher average ride fares, but even so low rates of fulfillment might imply bad practices of pricing.</span>
<span id="cb3-347"><a href="#cb3-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-348"><a href="#cb3-348" aria-hidden="true" tabindex="-1"></a><span class="fu">### Relationship between Variables</span></span>
<span id="cb3-349"><a href="#cb3-349" aria-hidden="true" tabindex="-1"></a>In the upcoming three scatterplots, I intend to examine whether any relationships exist between the variables.</span>
<span id="cb3-352"><a href="#cb3-352" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-353"><a href="#cb3-353" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x <span class="op">=</span> <span class="st">'average_ride_fare'</span>, y <span class="op">=</span> <span class="st">'offered_created%'</span>, data <span class="op">=</span> distance_buckets, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-354"><a href="#cb3-354" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Avg. Ride Fare'</span>)</span>
<span id="cb3-355"><a href="#cb3-355" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Offered Orders to Created Orders %'</span>)</span>
<span id="cb3-356"><a href="#cb3-356" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Offered-to-created vs. Avg. Ride Fare Scatterplot'</span>)</span>
<span id="cb3-357"><a href="#cb3-357" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-358"><a href="#cb3-358" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-359"><a href="#cb3-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-360"><a href="#cb3-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-363"><a href="#cb3-363" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-364"><a href="#cb3-364" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x <span class="op">=</span> <span class="st">'average_ride_fare'</span>, y <span class="op">=</span> <span class="st">'accepted_offered%'</span>, data <span class="op">=</span> distance_buckets, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-365"><a href="#cb3-365" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Avg. Ride Fare'</span>)</span>
<span id="cb3-366"><a href="#cb3-366" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Accepted Orders to Offered Orders %'</span>)</span>
<span id="cb3-367"><a href="#cb3-367" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Accepted-to-offered vs. Avg. Ride Fare Scatterplot'</span>)</span>
<span id="cb3-368"><a href="#cb3-368" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-369"><a href="#cb3-369" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-370"><a href="#cb3-370" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-371"><a href="#cb3-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-374"><a href="#cb3-374" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-375"><a href="#cb3-375" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x <span class="op">=</span> <span class="st">'average_ride_fare'</span>, y <span class="op">=</span> <span class="st">'fulfillment_rate%'</span>, data <span class="op">=</span> distance_buckets, color <span class="op">=</span> col_green_plt)</span>
<span id="cb3-376"><a href="#cb3-376" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Avg. Ride Fare'</span>)</span>
<span id="cb3-377"><a href="#cb3-377" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Fulfillment Rate %'</span>)</span>
<span id="cb3-378"><a href="#cb3-378" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Fulfillment Rate vs. Avg. Ride Fare Scatterplot'</span>)</span>
<span id="cb3-379"><a href="#cb3-379" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-380"><a href="#cb3-380" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-381"><a href="#cb3-381" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-382"><a href="#cb3-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-383"><a href="#cb3-383" aria-hidden="true" tabindex="-1"></a>A negative virtually linear relationship can be seen in the first part of <span class="in">`accepted_offered%`</span> and <span class="in">`fulfillment_rate%`</span> vs. <span class="in">`average_ride_fare`</span> plots. In the second part, however, such a characteristic is gone.</span>
<span id="cb3-384"><a href="#cb3-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-385"><a href="#cb3-385" aria-hidden="true" tabindex="-1"></a>One speculation is that pricing in those distance buckets with fares in the middle range have not been adjusted correctly. In other words, snapp have not incentivized bikers appropriately. </span>
<span id="cb3-386"><a href="#cb3-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-387"><a href="#cb3-387" aria-hidden="true" tabindex="-1"></a><span class="fu">## Suggestions</span></span>
<span id="cb3-388"><a href="#cb3-388" aria-hidden="true" tabindex="-1"></a>**NOTE: The suggestions below are made under the assumption that changes in order prices do not affect the cost structure. Additionally, external factors are disregarded, which is far from realistic business environment and price theory.**</span>
<span id="cb3-389"><a href="#cb3-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-390"><a href="#cb3-390" aria-hidden="true" tabindex="-1"></a>**Also, the analysis so far is based on the data generated in one day for the service type in a particular city. In general, we can't conclude with a one-day data set.**</span>
<span id="cb3-391"><a href="#cb3-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-392"><a href="#cb3-392" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The <span class="in">`fulfillment rate`</span> in long distance buckets, especially with fewer requests, such as distances longer than 33 kilometers, is not very good. Despite of their higher average fares, we can increase the price as an incentive for riders to complete their orders. For example, in buckets 30-31 and 32-33 the average fare is higher than bucket with above-35 Kms (all three groups have similar number of rides). Prices should be increased with respect to distances, but not to the extent that makes us lose our orders.</span>
<span id="cb3-393"><a href="#cb3-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-394"><a href="#cb3-394" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Moderate distance buckets also suffer from low <span class="in">`accepted-to-offered`</span> and <span class="in">`fulfillment rate`</span> percentages. In these bins, number of requests surges comparing with the longer distances. Generally, the range of the average ride fare in these groups are in the middle. It could be helpful to increase price here too, but we should bear in mind that with the higher price, the number of requests are likely to drop and we need an optimized price here. Willingness-to-pay calculation, for instance, is able to give us a hint regarding the extent of price increases. </span>
<span id="cb3-395"><a href="#cb3-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-396"><a href="#cb3-396" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Finally, distance buckets with shorter paths are the most lucrative ones. Number of <span class="in">`requests`</span> for these types of rides is much greater than others and if we assume 70% as an acceptable <span class="in">`fulfillment rate`</span>, current price level seems right and no specific price action is needed. <span class="in">`Total Ride Fare`</span> or <span class="in">`GMV`</span> is its peak at these distance buckets because of high requests. This number is in direct relationship with requests (and rides) and price, so decreasing prices can lead to more requests and may cover more than the loss due to lower price. Such policy, though, must be conducted after more analysis of potential exploitation of the market.</span>
<span id="cb3-397"><a href="#cb3-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-398"><a href="#cb3-398" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2. Ride Loss Calculation</span></span>
<span id="cb3-399"><a href="#cb3-399" aria-hidden="true" tabindex="-1"></a>Sometimes a technical problem arises and affects the creation or finishing of the orders. In these situations, business performance would drop, and some orders would be lost.</span>
<span id="cb3-400"><a href="#cb3-400" aria-hidden="true" tabindex="-1"></a>One of the business team's tasks is investigating how these issues affect the business.</span>
<span id="cb3-401"><a href="#cb3-401" aria-hidden="true" tabindex="-1"></a>On June 8th, there was a technical issue, and bikers couldn't accept the orders after 10 p.m., and the ride number dropped.</span>
<span id="cb3-402"><a href="#cb3-402" aria-hidden="true" tabindex="-1"></a>In this question, you should calculate the number of rides we lost because of this issue.</span>
<span id="cb3-403"><a href="#cb3-403" aria-hidden="true" tabindex="-1"></a>The table contains the performance of 2 regular days.</span>
<span id="cb3-404"><a href="#cb3-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-407"><a href="#cb3-407" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-408"><a href="#cb3-408" aria-hidden="true" tabindex="-1"></a>ride_loss <span class="op">=</span> pd.read_csv(<span class="st">'Snapp Ride Loss Calculation.csv'</span>, parse_dates<span class="op">=</span>[<span class="st">'Date'</span>])</span>
<span id="cb3-409"><a href="#cb3-409" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-410"><a href="#cb3-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-413"><a href="#cb3-413" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-414"><a href="#cb3-414" aria-hidden="true" tabindex="-1"></a>ride_loss.columns <span class="op">=</span> ride_loss.columns.<span class="bu">str</span>.replace(<span class="st">' '</span>,<span class="st">'_'</span>).<span class="bu">str</span>.lower()</span>
<span id="cb3-415"><a href="#cb3-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-416"><a href="#cb3-416" aria-hidden="true" tabindex="-1"></a>ride_loss.rename(columns<span class="op">=</span>{<span class="st">'_offered-order_/_created-order_%'</span>:<span class="st">'offered_created%'</span>, <span class="st">'accepted-order_/_offered-order%'</span>:<span class="st">'accepted_offered%'</span>, <span class="st">'fullfillment_rate%'</span>:<span class="st">'fulfillment_rate%'</span>, <span class="st">'requester_'</span>:<span class="st">'requester'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-417"><a href="#cb3-417" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-418"><a href="#cb3-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-419"><a href="#cb3-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-422"><a href="#cb3-422" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-423"><a href="#cb3-423" aria-hidden="true" tabindex="-1"></a>prct_cols <span class="op">=</span> [<span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>,<span class="st">'fulfillment_rate%'</span>]</span>
<span id="cb3-424"><a href="#cb3-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-425"><a href="#cb3-425" aria-hidden="true" tabindex="-1"></a>ride_loss[prct_cols] <span class="op">=</span> ride_loss[prct_cols].applymap(<span class="kw">lambda</span> x: <span class="bu">int</span>(x.strip(<span class="st">'%'</span>)))</span>
<span id="cb3-426"><a href="#cb3-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-427"><a href="#cb3-427" aria-hidden="true" tabindex="-1"></a>ride_loss[<span class="st">'average_ride_fare'</span>] <span class="op">=</span> ride_loss[<span class="st">'average_ride_fare'</span>].<span class="bu">str</span>.replace(<span class="st">','</span>, <span class="st">''</span>).astype(<span class="st">'int'</span>)</span>
<span id="cb3-428"><a href="#cb3-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-429"><a href="#cb3-429" aria-hidden="true" tabindex="-1"></a>ride_loss[<span class="st">'date'</span>] <span class="op">=</span> ride_loss[<span class="st">'date'</span>].fillna(method<span class="op">=</span><span class="st">'ffill'</span>)</span>
<span id="cb3-430"><a href="#cb3-430" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-431"><a href="#cb3-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-434"><a href="#cb3-434" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-435"><a href="#cb3-435" aria-hidden="true" tabindex="-1"></a>ride_loss</span>
<span id="cb3-436"><a href="#cb3-436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-437"><a href="#cb3-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-438"><a href="#cb3-438" aria-hidden="true" tabindex="-1"></a><span class="fu">### Comparing the Days</span></span>
<span id="cb3-439"><a href="#cb3-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-442"><a href="#cb3-442" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-443"><a href="#cb3-443" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x <span class="op">=</span> <span class="st">'hour'</span>, y <span class="op">=</span> <span class="st">'request'</span>, hue <span class="op">=</span> <span class="st">'date'</span>, data <span class="op">=</span> ride_loss)</span>
<span id="cb3-444"><a href="#cb3-444" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-445"><a href="#cb3-445" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Request'</span>)</span>
<span id="cb3-446"><a href="#cb3-446" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Requests across 3 days and 5 hours'</span>)</span>
<span id="cb3-447"><a href="#cb3-447" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">19</span>, <span class="dv">24</span>, <span class="dv">1</span>))</span>
<span id="cb3-448"><a href="#cb3-448" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-449"><a href="#cb3-449" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-450"><a href="#cb3-450" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-451"><a href="#cb3-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-454"><a href="#cb3-454" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-455"><a href="#cb3-455" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x <span class="op">=</span> <span class="st">'hour'</span>, y <span class="op">=</span> <span class="st">'ride'</span>, hue <span class="op">=</span> <span class="st">'date'</span>, data <span class="op">=</span> ride_loss)</span>
<span id="cb3-456"><a href="#cb3-456" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-457"><a href="#cb3-457" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Ride'</span>)</span>
<span id="cb3-458"><a href="#cb3-458" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Rides across 3 days and 5 hours'</span>)</span>
<span id="cb3-459"><a href="#cb3-459" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">19</span>, <span class="dv">24</span>, <span class="dv">1</span>))</span>
<span id="cb3-460"><a href="#cb3-460" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-461"><a href="#cb3-461" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-462"><a href="#cb3-462" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-463"><a href="#cb3-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-466"><a href="#cb3-466" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-467"><a href="#cb3-467" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x <span class="op">=</span> <span class="st">'hour'</span>, y <span class="op">=</span> <span class="st">'offered_created%'</span>, hue <span class="op">=</span> <span class="st">'date'</span>, data <span class="op">=</span> ride_loss)</span>
<span id="cb3-468"><a href="#cb3-468" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-469"><a href="#cb3-469" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Offered Orders to Created Orders %'</span>)</span>
<span id="cb3-470"><a href="#cb3-470" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Offered-to-created % across 3 days and 5 hours'</span>)</span>
<span id="cb3-471"><a href="#cb3-471" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">19</span>, <span class="dv">24</span>, <span class="dv">1</span>))</span>
<span id="cb3-472"><a href="#cb3-472" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-473"><a href="#cb3-473" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-474"><a href="#cb3-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-475"><a href="#cb3-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-478"><a href="#cb3-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-479"><a href="#cb3-479" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x <span class="op">=</span> <span class="st">'hour'</span>, y <span class="op">=</span> <span class="st">'accepted_offered%'</span>, hue <span class="op">=</span> <span class="st">'date'</span>, data <span class="op">=</span> ride_loss)</span>
<span id="cb3-480"><a href="#cb3-480" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-481"><a href="#cb3-481" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Accepted Orders to Offered Orders %'</span>)</span>
<span id="cb3-482"><a href="#cb3-482" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Accepted-to-created % across 3 days and 5 hours'</span>)</span>
<span id="cb3-483"><a href="#cb3-483" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">19</span>, <span class="dv">24</span>, <span class="dv">1</span>))</span>
<span id="cb3-484"><a href="#cb3-484" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-485"><a href="#cb3-485" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-486"><a href="#cb3-486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-487"><a href="#cb3-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-488"><a href="#cb3-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-491"><a href="#cb3-491" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-492"><a href="#cb3-492" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x <span class="op">=</span> <span class="st">'hour'</span>, y <span class="op">=</span> <span class="st">'average_ride_fare'</span>, hue <span class="op">=</span> <span class="st">'date'</span>, data <span class="op">=</span> ride_loss)</span>
<span id="cb3-493"><a href="#cb3-493" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-494"><a href="#cb3-494" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Average Ride Fare'</span>)</span>
<span id="cb3-495"><a href="#cb3-495" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Avg. Ride Fare across 3 days and 5 hours'</span>)</span>
<span id="cb3-496"><a href="#cb3-496" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">19</span>, <span class="dv">24</span>, <span class="dv">1</span>))</span>
<span id="cb3-497"><a href="#cb3-497" aria-hidden="true" tabindex="-1"></a>plt.grid(linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb3-498"><a href="#cb3-498" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-499"><a href="#cb3-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-500"><a href="#cb3-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-501"><a href="#cb3-501" aria-hidden="true" tabindex="-1"></a>Before 10 p.m., the average fare on June 8th was consistently higher than the previous days, suggesting that each request's contribution was above the requests on June 6th and 7th. This difference is intesified after 10 p.m. A deeper investigation is warranted to determine whether the higher average fares were as a result of technical issues and rides decrease or influenced by specific factors on that day. </span>
<span id="cb3-502"><a href="#cb3-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-503"><a href="#cb3-503" aria-hidden="true" tabindex="-1"></a>It's clear that, on average, on 6th and 7th of June, the ratio of accepted-to-offered before 10 p.m. are similar with its value on the 8th. However, after that hour, this ratio dropped significantly on June 8th. The average was 75.5% for the first two nights, but it dropped to 41% on the last night. Also, at 11 p.m, the average ratio was 69.6% and it dropped to 15% on the 8th!</span>
<span id="cb3-504"><a href="#cb3-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-505"><a href="#cb3-505" aria-hidden="true" tabindex="-1"></a><span class="fu">### Losses Calculations</span></span>
<span id="cb3-506"><a href="#cb3-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-507"><a href="#cb3-507" aria-hidden="true" tabindex="-1"></a>The table below presents the average values for the relevant variables for the 6th and 7th days.</span>
<span id="cb3-510"><a href="#cb3-510" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-511"><a href="#cb3-511" aria-hidden="true" tabindex="-1"></a>ride_loss_67_mean <span class="op">=</span> ride_loss[(ride_loss[<span class="st">'date'</span>] <span class="op">==</span> <span class="st">'2022-06-06'</span>) <span class="op">|</span> (ride_loss[<span class="st">'date'</span>] <span class="op">==</span> <span class="st">'2022-06-07'</span>)].groupby(<span class="st">'hour'</span>)[[<span class="st">'request'</span>, <span class="st">'ride'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>, <span class="st">'fulfillment_rate%'</span>, <span class="st">'average_ride_fare'</span>]].mean().<span class="bu">round</span>(<span class="dv">3</span>).reset_index()</span>
<span id="cb3-512"><a href="#cb3-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-513"><a href="#cb3-513" aria-hidden="true" tabindex="-1"></a>ride_loss_67_mean</span>
<span id="cb3-514"><a href="#cb3-514" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-515"><a href="#cb3-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-516"><a href="#cb3-516" aria-hidden="true" tabindex="-1"></a>And for a better understanding, here is the data for the last day, June 8th:</span>
<span id="cb3-519"><a href="#cb3-519" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-520"><a href="#cb3-520" aria-hidden="true" tabindex="-1"></a>ride_loss_8 <span class="op">=</span> ride_loss[ride_loss[<span class="st">'date'</span>] <span class="op">==</span> <span class="st">'2022-06-08'</span>][[<span class="st">'hour'</span>,<span class="st">'request'</span>, <span class="st">'ride'</span>, <span class="st">'offered_created%'</span>, <span class="st">'accepted_offered%'</span>, <span class="st">'fulfillment_rate%'</span>, <span class="st">'average_ride_fare'</span>]]</span>
<span id="cb3-521"><a href="#cb3-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-522"><a href="#cb3-522" aria-hidden="true" tabindex="-1"></a>ride_loss_8</span>
<span id="cb3-523"><a href="#cb3-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-524"><a href="#cb3-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-525"><a href="#cb3-525" aria-hidden="true" tabindex="-1"></a>Next, the two tables are merged together to enable further calculations (67J is derived from the table including the 6th and 7th of June, while 8J corresponds to the table of the 8th):</span>
<span id="cb3-526"><a href="#cb3-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-529"><a href="#cb3-529" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-530"><a href="#cb3-530" aria-hidden="true" tabindex="-1"></a>joined_ride_loss <span class="op">=</span> ride_loss_67_mean.drop(columns<span class="op">=</span>[<span class="st">'offered_created%'</span>]).merge(ride_loss_8.drop(columns<span class="op">=</span>[<span class="st">'offered_created%'</span>]), how<span class="op">=</span><span class="st">'inner'</span>, on<span class="op">=</span><span class="st">'hour'</span>, suffixes<span class="op">=</span>(<span class="st">'67J'</span>,<span class="st">'8J'</span>))</span>
<span id="cb3-531"><a href="#cb3-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-532"><a href="#cb3-532" aria-hidden="true" tabindex="-1"></a>joined_ride_loss</span>
<span id="cb3-533"><a href="#cb3-533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-534"><a href="#cb3-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-535"><a href="#cb3-535" aria-hidden="true" tabindex="-1"></a>Next, we subtract the actual number of rides from the expected value, which is derived from the average of previous days:</span>
<span id="cb3-536"><a href="#cb3-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-539"><a href="#cb3-539" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-540"><a href="#cb3-540" aria-hidden="true" tabindex="-1"></a>joined_ride_loss <span class="op">=</span> joined_ride_loss[(joined_ride_loss[<span class="st">'hour'</span>] <span class="op">==</span> <span class="dv">22</span>) <span class="op">|</span> (joined_ride_loss[<span class="st">'hour'</span>] <span class="op">==</span> <span class="dv">23</span>)]</span>
<span id="cb3-541"><a href="#cb3-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-542"><a href="#cb3-542" aria-hidden="true" tabindex="-1"></a>joined_ride_loss[<span class="st">'expected_accepted'</span>] <span class="op">=</span> joined_ride_loss[<span class="st">'request8J'</span>] <span class="op">*</span> joined_ride_loss[<span class="st">'accepted_offered%67J'</span>] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb3-543"><a href="#cb3-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-544"><a href="#cb3-544" aria-hidden="true" tabindex="-1"></a>joined_ride_loss[<span class="st">'expected_ride'</span>] <span class="op">=</span> <span class="bu">round</span>(joined_ride_loss[<span class="st">'request8J'</span>] <span class="op">*</span> joined_ride_loss[<span class="st">'fulfillment_rate%67J'</span>] <span class="op">/</span> <span class="dv">100</span>)</span>
<span id="cb3-545"><a href="#cb3-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-546"><a href="#cb3-546" aria-hidden="true" tabindex="-1"></a>joined_ride_loss[<span class="st">'loss_rides'</span>] <span class="op">=</span> joined_ride_loss[<span class="st">'expected_ride'</span>] <span class="op">-</span> joined_ride_loss[<span class="st">'ride8J'</span>]</span>
<span id="cb3-547"><a href="#cb3-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-548"><a href="#cb3-548" aria-hidden="true" tabindex="-1"></a>ride_loss_cal <span class="op">=</span> joined_ride_loss[[<span class="st">'hour'</span>,<span class="st">'expected_accepted'</span>, <span class="st">'expected_ride'</span>, <span class="st">'loss_rides'</span>, <span class="st">'average_ride_fare8J'</span>]]</span>
<span id="cb3-549"><a href="#cb3-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-550"><a href="#cb3-550" aria-hidden="true" tabindex="-1"></a>ride_loss_cal</span>
<span id="cb3-551"><a href="#cb3-551" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-552"><a href="#cb3-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-553"><a href="#cb3-553" aria-hidden="true" tabindex="-1"></a>The question asked about the number of rides lost because of the technical issue. Nevertheless, an estimation of revenue loss could also offer valuable insights. Ultimately, the calculation for revenue loss is as follows:</span>
<span id="cb3-554"><a href="#cb3-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-557"><a href="#cb3-557" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-558"><a href="#cb3-558" aria-hidden="true" tabindex="-1"></a>ride_loss_cal[<span class="st">'revenue_loss_million'</span>] <span class="op">=</span> ride_loss_cal[<span class="st">'expected_ride'</span>] <span class="op">*</span> ride_loss_cal[<span class="st">'average_ride_fare8J'</span>] <span class="op">/</span> <span class="dv">1000000</span></span>
<span id="cb3-559"><a href="#cb3-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-560"><a href="#cb3-560" aria-hidden="true" tabindex="-1"></a>ride_loss_cal[[<span class="st">'hour'</span>, <span class="st">'loss_rides'</span>,<span class="st">'revenue_loss_million'</span>]]</span>
<span id="cb3-561"><a href="#cb3-561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-562"><a href="#cb3-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-563"><a href="#cb3-563" aria-hidden="true" tabindex="-1"></a>**NOTE: In calculating revenue loss, I've assumed that the average ride fare would not have changed significantly if the technical issue hadn't occurred.**</span>
<span id="cb3-564"><a href="#cb3-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-565"><a href="#cb3-565" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3. Price Monitoring</span></span>
<span id="cb3-566"><a href="#cb3-566" aria-hidden="true" tabindex="-1"></a>The whole logic of box pricing is to match the demand and supply. The business performs well, and supply and demand are balanced when the price has been set correctly. We do real-time monitoring to ensure sound business performance and change prices whenever needed.</span>
<span id="cb3-567"><a href="#cb3-567" aria-hidden="true" tabindex="-1"></a>The business would be at its best when the Accepted-Order to Offered-Order ratio is between 75% and 80%.</span>
<span id="cb3-568"><a href="#cb3-568" aria-hidden="true" tabindex="-1"></a>These tables represent a snapshot of city A's real-time data at 17:30. We defined 19 areas in this city, which are coded.</span>
<span id="cb3-569"><a href="#cb3-569" aria-hidden="true" tabindex="-1"></a>In this question, tell us what price action is needed to improve the business performance at 17:30.</span>
<span id="cb3-570"><a href="#cb3-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-573"><a href="#cb3-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-574"><a href="#cb3-574" aria-hidden="true" tabindex="-1"></a>price_mont_request <span class="op">=</span> pd.read_csv(<span class="st">'Snapp Price Monitoring - Request.csv'</span>)</span>
<span id="cb3-575"><a href="#cb3-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-576"><a href="#cb3-576" aria-hidden="true" tabindex="-1"></a>price_mont_accoff <span class="op">=</span> pd.read_csv(<span class="st">'Snapp Price Monitoring - Accepted to Offered.csv'</span>)</span>
<span id="cb3-577"><a href="#cb3-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-578"><a href="#cb3-578" aria-hidden="true" tabindex="-1"></a>price_mont_fulfill <span class="op">=</span> pd.read_csv(<span class="st">'Snapp Price Monitoring - Fulfillment.csv'</span>)</span>
<span id="cb3-579"><a href="#cb3-579" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-580"><a href="#cb3-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-581"><a href="#cb3-581" aria-hidden="true" tabindex="-1"></a>**NOTE: Considering that Area Code 127 and 128 have notably high numbers of requests, it makes sense to consider them as outliers. Therefore, changing the center in the first heatmap to the median number of requests is a more robust approach.**</span>
<span id="cb3-582"><a href="#cb3-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-585"><a href="#cb3-585" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-586"><a href="#cb3-586" aria-hidden="true" tabindex="-1"></a>price_mont_request.drop(price_mont_request.index[<span class="op">-</span><span class="dv">1</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-587"><a href="#cb3-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-588"><a href="#cb3-588" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> sns.diverging_palette(<span class="dv">10</span>, <span class="dv">100</span>, s<span class="op">=</span><span class="dv">70</span>, l <span class="op">=</span> <span class="dv">50</span>, n<span class="op">=</span><span class="dv">1000</span>, as_cmap<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-589"><a href="#cb3-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-590"><a href="#cb3-590" aria-hidden="true" tabindex="-1"></a>req_array <span class="op">=</span> price_mont_request.drop(columns<span class="op">=</span>[<span class="st">'Area Code'</span>]).to_numpy().flatten()</span>
<span id="cb3-591"><a href="#cb3-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-592"><a href="#cb3-592" aria-hidden="true" tabindex="-1"></a>req_med <span class="op">=</span> np.median(req_array[<span class="op">~</span>np.isnan(req_array)])</span>
<span id="cb3-593"><a href="#cb3-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-594"><a href="#cb3-594" aria-hidden="true" tabindex="-1"></a>price_mont_request.set_index(<span class="st">'Area Code'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-595"><a href="#cb3-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-596"><a href="#cb3-596" aria-hidden="true" tabindex="-1"></a>sns.heatmap(price_mont_request, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.0f'</span>, linewidths<span class="op">=</span><span class="dv">3</span>, cmap<span class="op">=</span>colors, center<span class="op">=</span>req_med)</span>
<span id="cb3-597"><a href="#cb3-597" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Number of Requests across Areas and Hours'</span>)</span>
<span id="cb3-598"><a href="#cb3-598" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-599"><a href="#cb3-599" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Area Code'</span>)</span>
<span id="cb3-600"><a href="#cb3-600" aria-hidden="true" tabindex="-1"></a>plt.yticks(rotation <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb3-601"><a href="#cb3-601" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-602"><a href="#cb3-602" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-603"><a href="#cb3-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-606"><a href="#cb3-606" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-607"><a href="#cb3-607" aria-hidden="true" tabindex="-1"></a>price_mont_accoff.drop(price_mont_accoff.index[<span class="op">-</span><span class="dv">1</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-608"><a href="#cb3-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-609"><a href="#cb3-609" aria-hidden="true" tabindex="-1"></a>price_mont_accoff <span class="op">=</span> price_mont_accoff.applymap(<span class="kw">lambda</span> x: <span class="bu">int</span>(x.strip(<span class="st">'%'</span>)) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb3-610"><a href="#cb3-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-611"><a href="#cb3-611" aria-hidden="true" tabindex="-1"></a>price_mont_accoff.set_index(<span class="st">'Area Code'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-612"><a href="#cb3-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-613"><a href="#cb3-613" aria-hidden="true" tabindex="-1"></a>sns.heatmap(price_mont_accoff, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.0f'</span>, linewidths<span class="op">=</span><span class="dv">3</span>, vmin<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span><span class="dv">100</span>, cmap<span class="op">=</span>colors)</span>
<span id="cb3-614"><a href="#cb3-614" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Accepted-to-Offered Perc across Areas and Hours'</span>)</span>
<span id="cb3-615"><a href="#cb3-615" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-616"><a href="#cb3-616" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Area Code'</span>)</span>
<span id="cb3-617"><a href="#cb3-617" aria-hidden="true" tabindex="-1"></a>plt.yticks(rotation <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb3-618"><a href="#cb3-618" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-619"><a href="#cb3-619" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-620"><a href="#cb3-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-621"><a href="#cb3-621" aria-hidden="true" tabindex="-1"></a>An more compeling heatmap shows the magnitude of deviation from our preferable range. In the next figure, direction and magnitude of deviation from the desired range is demonstrated. Those cells containing value of 0 represent acceptable percentage.</span>
<span id="cb3-622"><a href="#cb3-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-625"><a href="#cb3-625" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-626"><a href="#cb3-626" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> deviation_func(x):</span>
<span id="cb3-627"><a href="#cb3-627" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">80</span>:</span>
<span id="cb3-628"><a href="#cb3-628" aria-hidden="true" tabindex="-1"></a>      res <span class="op">=</span> x <span class="op">-</span> <span class="dv">80</span></span>
<span id="cb3-629"><a href="#cb3-629" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> x <span class="op">&lt;</span> <span class="dv">75</span>:</span>
<span id="cb3-630"><a href="#cb3-630" aria-hidden="true" tabindex="-1"></a>      res <span class="op">=</span> x <span class="op">-</span> <span class="dv">75</span></span>
<span id="cb3-631"><a href="#cb3-631" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> np.isnan(x):</span>
<span id="cb3-632"><a href="#cb3-632" aria-hidden="true" tabindex="-1"></a>      res <span class="op">=</span> x</span>
<span id="cb3-633"><a href="#cb3-633" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-634"><a href="#cb3-634" aria-hidden="true" tabindex="-1"></a>      res <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-635"><a href="#cb3-635" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb3-636"><a href="#cb3-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-637"><a href="#cb3-637" aria-hidden="true" tabindex="-1"></a>price_mont_accoff_dev <span class="op">=</span> price_mont_accoff.applymap(deviation_func)</span>
<span id="cb3-638"><a href="#cb3-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-639"><a href="#cb3-639" aria-hidden="true" tabindex="-1"></a>sns.heatmap(price_mont_accoff_dev, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.0f'</span>, linewidths<span class="op">=</span><span class="dv">3</span>, cmap<span class="op">=</span>colors, center<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb3-640"><a href="#cb3-640" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Deviation of Accepted-to-Offered Perc across Areas and Hours'</span>)</span>
<span id="cb3-641"><a href="#cb3-641" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-642"><a href="#cb3-642" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Area Code'</span>)</span>
<span id="cb3-643"><a href="#cb3-643" aria-hidden="true" tabindex="-1"></a>plt.yticks(rotation <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb3-644"><a href="#cb3-644" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-645"><a href="#cb3-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-646"><a href="#cb3-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-647"><a href="#cb3-647" aria-hidden="true" tabindex="-1"></a>Areas 111, 114, 115, 116, 118, 121, 123, 124, and 126 have deviated more frequently and with higher percentage points than other areas. Pricing policies must be modified to achieve a more stable and favorable percentage.</span>
<span id="cb3-648"><a href="#cb3-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-651"><a href="#cb3-651" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-652"><a href="#cb3-652" aria-hidden="true" tabindex="-1"></a>price_mont_fulfill.drop(price_mont_fulfill.index[<span class="op">-</span><span class="dv">1</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-653"><a href="#cb3-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-654"><a href="#cb3-654" aria-hidden="true" tabindex="-1"></a>price_mont_fulfill.replace(<span class="st">'-'</span>, np.nan, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-655"><a href="#cb3-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-656"><a href="#cb3-656" aria-hidden="true" tabindex="-1"></a>price_mont_fulfill <span class="op">=</span> price_mont_fulfill.applymap(<span class="kw">lambda</span> x: <span class="bu">int</span>(x.strip(<span class="st">'%'</span>)) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb3-657"><a href="#cb3-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-658"><a href="#cb3-658" aria-hidden="true" tabindex="-1"></a>price_mont_fulfill.set_index(<span class="st">'Area Code'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-659"><a href="#cb3-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-660"><a href="#cb3-660" aria-hidden="true" tabindex="-1"></a>sns.heatmap(price_mont_fulfill, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.0f'</span>, linewidths<span class="op">=</span><span class="dv">3</span>, vmin<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span><span class="dv">100</span>, cmap<span class="op">=</span>colors)</span>
<span id="cb3-661"><a href="#cb3-661" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Fulfillment Rate across Areas and Hours'</span>)</span>
<span id="cb3-662"><a href="#cb3-662" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Hour'</span>)</span>
<span id="cb3-663"><a href="#cb3-663" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Area Code'</span>)</span>
<span id="cb3-664"><a href="#cb3-664" aria-hidden="true" tabindex="-1"></a>plt.yticks(rotation <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb3-665"><a href="#cb3-665" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb3-666"><a href="#cb3-666" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-667"><a href="#cb3-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-668"><a href="#cb3-668" aria-hidden="true" tabindex="-1"></a><span class="fu">### Recommending Price Actions</span></span>
<span id="cb3-669"><a href="#cb3-669" aria-hidden="true" tabindex="-1"></a>In the next section, I provide some suggestions that can contribute to the business performance based on the criterion given in the question. However, it's imperative to take number of requests (demand) into account as increasing or decreasing prices impact directly on it.</span>
<span id="cb3-670"><a href="#cb3-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-671"><a href="#cb3-671" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Areas 112, 113, 117, 119, 120, 125, 127, and 128 (High Requests)</span></span>
<span id="cb3-672"><a href="#cb3-672" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need to incentivize riders to accomplish the orders in areas that have large number of <span class="in">`requests`</span> but low <span class="in">`rates of fulfillment`</span>. For instance, Areas 117, 119, and 125 have shown potentials since they have more requets relatively. We can offer bikers a more proportion of fare as their commission (in case it would be possible) to gain a better <span class="in">`fulfillment rate`</span>. </span>
<span id="cb3-673"><a href="#cb3-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-674"><a href="#cb3-674" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Considering the second table (Accepted Orders to Offered Orders) and our criterion for business performance, the ratio in Area 112 is in its desired range at 17 o'clock, so no price action is needed. Areas 113 and 127 have larger than desired ratio, and this means we should make other areas more attractive to bikers. Areas 117, 119 and 125 are suffering from low percentage so that increasing prices can be beneficial (117 and 119 are in more critical situations). </span>
<span id="cb3-675"><a href="#cb3-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-676"><a href="#cb3-676" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Areas 120, 125, and 128 are so close to the desired range according to the tables above. Their previous hours trend don't show too much volatility as well. Therefore, it's recommended not to change prices in these areas. </span>
<span id="cb3-677"><a href="#cb3-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-678"><a href="#cb3-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-679"><a href="#cb3-679" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Areas 110, 111, 114, 115, 116, 118, 121, 122, 123, 124, 126 (Low Requests)</span></span>
<span id="cb3-680"><a href="#cb3-680" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ratios in some areas are far below the desired range, but the fact that these areas have received few requests means we should not conclude to increase prices immediately. In fact, one of the reasons why the number of requests is insignificant in these regions may be their high prices. If we had historical information about these areas and their demographic characteristics, we would be more confident in judging if we are attracting suboptimal requests and high pricing is an issue. We assume number of orders are in their natural range.</span>
<span id="cb3-681"><a href="#cb3-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-682"><a href="#cb3-682" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Areas 110 and 114 have <span class="in">`accepted-to-offered`</span> percentage above the desired range, so we can increase prices in other areas as a nudge for riders to accept orders in those regions rather than in these two.</span>
<span id="cb3-683"><a href="#cb3-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-684"><a href="#cb3-684" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The remaining areas need to have more acceptance rates. Areas 115, 121, 123, and 125 should be taken care of as they have a very low percentage at 17. But again, we would also be better off to increase the commission proportion in favor of riders as <span class="in">`fulfillment rate`</span> is poor. We must remember that prices leads to even lower requests, and the company should seek an optimal increase.</span>
<span id="cb3-685"><a href="#cb3-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-686"><a href="#cb3-686" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Areas 115 and 122 have a <span class="in">`fulfillment rate`</span> of 0 at 17 o'clock! In other words, those few requests haven't been delivered at all. Area codes 111, 116, 118, 121, 123 and 126 have rates less than or equal to 50%. Area 123, in specific, is doing poorly throughout the day in this matter. <span class="in">`accepted-to-offered`</span> in area 122 didn't meet the desired level at 12, 13, and 14, and at 16, there was just one request. It might be more reasonable to raise prices to make it more attractive in this area.</span>
<span id="cb3-687"><a href="#cb3-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-688"><a href="#cb3-688" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`accepted-to-offered`</span> in area 124 has been somewhat unstable throughout these hours, but now reached its acceptable level. We don't change pricing in this area. </span>
<span id="cb3-689"><a href="#cb3-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-690"><a href="#cb3-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-691"><a href="#cb3-691" aria-hidden="true" tabindex="-1"></a><span class="fu">### Missing Values</span></span>
<span id="cb3-692"><a href="#cb3-692" aria-hidden="true" tabindex="-1"></a>In all three tables we see no values for some area codes at some hours during the day. Missing values should always be taken serious and neglecting them could mislead our conclusions. </span>
<span id="cb3-693"><a href="#cb3-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-694"><a href="#cb3-694" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>In table 2, the <span class="in">`accepted-to-offered`</span> of area code 123 are missed from 13 to 16 and we only have 2 values (33%) at 12 and 17. We have to stick to the most recent here, but if previous days data existed, we could impute missing values in order to analyze and decide with greater precision. Nonetheless, we know that in this area we have a handful number of requests that are more likely not to delivered (based on fulfillment rate table). </span>
<span id="cb3-695"><a href="#cb3-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-696"><a href="#cb3-696" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Since there is no value available for accepted-to-offered orders in Area 122 at 17 o'clock, our decision must rely on the data from 16 o'clock.</span>
<span id="cb3-697"><a href="#cb3-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-698"><a href="#cb3-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-699"><a href="#cb3-699" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4. Price Test</span></span>
<span id="cb3-700"><a href="#cb3-700" aria-hidden="true" tabindex="-1"></a>We increased the price of service type 1 in 6 of our cities for two days to test the effect of this change on business. You can see the business parameter changes caused by the price change. What's your analysis of the test result based on this data? Should we increase our prices in these cities? Explain your answer.</span>
<span id="cb3-701"><a href="#cb3-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-702"><a href="#cb3-702" aria-hidden="true" tabindex="-1"></a>Note: </span>
<span id="cb3-703"><a href="#cb3-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-704"><a href="#cb3-704" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We can count the number of users that get the price (checker) and the total number of this action (check). </span>
<span id="cb3-705"><a href="#cb3-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-706"><a href="#cb3-706" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Price Conversion: The ratio of the users who submit the orders to those who get the prices.</span>
<span id="cb3-707"><a href="#cb3-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-708"><a href="#cb3-708" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>GMV: Gross Merchandise Value. (The sum of the rides price)</span>
<span id="cb3-709"><a href="#cb3-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-710"><a href="#cb3-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-713"><a href="#cb3-713" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-714"><a href="#cb3-714" aria-hidden="true" tabindex="-1"></a>price_test <span class="op">=</span> pd.read_csv(<span class="st">'Snapp Price Test.csv'</span>)</span>
<span id="cb3-715"><a href="#cb3-715" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-716"><a href="#cb3-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-717"><a href="#cb3-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-720"><a href="#cb3-720" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-721"><a href="#cb3-721" aria-hidden="true" tabindex="-1"></a>price_test.rename(columns<span class="op">=</span>{<span class="st">'Unnamed: 0'</span>:<span class="st">'City'</span>, <span class="st">'Unnamed: 1'</span>:<span class="st">'Test Day'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-722"><a href="#cb3-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-723"><a href="#cb3-723" aria-hidden="true" tabindex="-1"></a>price_test[<span class="st">'City'</span>] <span class="op">=</span> price_test[<span class="st">'City'</span>].fillna(method<span class="op">=</span><span class="st">'ffill'</span>)</span>
<span id="cb3-724"><a href="#cb3-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-725"><a href="#cb3-725" aria-hidden="true" tabindex="-1"></a><span class="co"># price_test['City'] = price_test['City'].str.replace('City ','C').str.replace(' ','') + ' ' + price_test['Test Day'].str.replace('Test ','')</span></span>
<span id="cb3-726"><a href="#cb3-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-727"><a href="#cb3-727" aria-hidden="true" tabindex="-1"></a><span class="co"># price_test.drop(columns=['Test Day'], inplace=True)</span></span>
<span id="cb3-728"><a href="#cb3-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-729"><a href="#cb3-729" aria-hidden="true" tabindex="-1"></a><span class="co"># price_test.rename(columns={'City':'City Day'}, inplace=True)</span></span>
<span id="cb3-730"><a href="#cb3-730" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-731"><a href="#cb3-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-732"><a href="#cb3-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-735"><a href="#cb3-735" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-736"><a href="#cb3-736" aria-hidden="true" tabindex="-1"></a>price_test</span>
<span id="cb3-737"><a href="#cb3-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-738"><a href="#cb3-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-739"><a href="#cb3-739" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Description</span></span>
<span id="cb3-740"><a href="#cb3-740" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`Request`</span> has decreased in all cities and both days and this change direction was expected according to the downward demand curve. But this measure is not our criteria by itself and we'll conclude after analysis of other variables. </span>
<span id="cb3-741"><a href="#cb3-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-742"><a href="#cb3-742" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`Ride`</span> column is lower than before in most cities and days since the number of requests decreased.</span>
<span id="cb3-743"><a href="#cb3-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-744"><a href="#cb3-744" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`Price Conversion`</span> also declined in almost all cities in both days except City 3 Day 1 and City 4 day 1. In other words, the probability of submiting an order after seeing the price deacreased too. Higher prices and lower <span class="in">`requests`</span> led to these relative changes. </span>
<span id="cb3-745"><a href="#cb3-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-746"><a href="#cb3-746" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`Accepted-to-Offered`</span> ratios increased in City 1, 4, and 5 on both days. The most significant surge in <span class="in">`Accepted-to-Offered`</span> ratios was observed in City 5. On the other hand, Cities 2, 3, and 6 experienced a decrease in their ratios. This ratio naturally comprises two components: the numerator and the denominator. In Cities 1, 4, and 5, price increases have resulted in higher acceptance probabilities among riders due to the enhanced incentives offered by the higher prices. Additionally, the denominator has decreased due to fewer requests and, consequently, fewer offers. Looking at changes of <span class="in">`GMV`</span> column can be helpful to see which effect is stronger. In cities 1 and 5 we earned more money so that the former effect is dominating, but in city 4 the latter seems to be larger.</span>
<span id="cb3-747"><a href="#cb3-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-748"><a href="#cb3-748" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`Fulfillment Rate%`</span> represents the percentage of orders or requests that have been delivered, so its change direction and its magnitude can be predicted out of changes in <span class="in">`Request`</span> and <span class="in">`Ride`</span> columns. Generally, in cities 1, 4, and 5 this ratio is greater than before implying that the number of rides didn't plummet to the extent of falling in requests. In other cities, the negative direction means the number of rides deacresed even more than requests.</span>
<span id="cb3-749"><a href="#cb3-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-750"><a href="#cb3-750" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`GMV`</span> is arguably one of the most vital factors for any business, as it indicates the company's earnings, despite other considerations that must be taken into account alongside it. This table exhibited a significant increase in City 5 for both days. City 1 also showed growth albeit with a relatively smaller percentage point increase. City 6, however, experienced revenue loss on both days, which, in conjunction with other data, suggests that the new pricing strategy is not performing well there. The situation in City 3 is also not promising from a GMV perspective. Cities 2 and 4 have more intricate scenarios. City 2 incurred a 3 percent GMV loss on the first day, followed by a 9 percent growth on the second day. City 4, conversely, gained 1 percent more GMV but experienced a 3 percent decline on the second day. Further data is required to attain a more confident assessment in this regard.</span>
<span id="cb3-751"><a href="#cb3-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-752"><a href="#cb3-752" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>It's supposed to see that <span class="in">`Average Fare per KM`</span> rises because of the increase in price levels and the lower levels of <span class="in">`requests`</span> and <span class="in">`rides`</span>. In City 6, though, it's strange to see drops in this variable. One explanation is that although the number of <span class="in">`Requests`</span> and <span class="in">`Ride`</span> dropped, the aggregated distance covered by bikers has reached a higher level than before. </span>
<span id="cb3-753"><a href="#cb3-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-754"><a href="#cb3-754" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`Ride Per Check`</span> is calculated by dividing <span class="in">`Ride`</span> by the number of <span class="in">`Check`</span>, which counts how many times customers have viewed the price. In certain cities and days, although the <span class="in">`Ride`</span> count has decreased, the <span class="in">`Ride Per Check`</span> has increased compared to the benchmark day. This is attributed to the reduced number of <span class="in">`Check`</span> instances more than <span class="in">`Ride`</span>.</span>
<span id="cb3-755"><a href="#cb3-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-756"><a href="#cb3-756" aria-hidden="true" tabindex="-1"></a><span class="fu">### Aggregated Values</span></span>
<span id="cb3-757"><a href="#cb3-757" aria-hidden="true" tabindex="-1"></a>Now, I remove percentage sign from all values to have a dataframe having numeric columns. Then, I try to calculate aggregated values and see if any further analysis can be done.</span>
<span id="cb3-758"><a href="#cb3-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-759"><a href="#cb3-759" aria-hidden="true" tabindex="-1"></a>The following table is produced by taking the average numbers for each city: </span>
<span id="cb3-762"><a href="#cb3-762" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb3-763"><a href="#cb3-763" aria-hidden="true" tabindex="-1"></a>price_test.iloc[:, <span class="dv">2</span>:] <span class="op">=</span> price_test.iloc[:, <span class="dv">2</span>:].applymap(<span class="kw">lambda</span> x: <span class="bu">int</span>(x.strip(<span class="st">'%'</span>)))</span>
<span id="cb3-764"><a href="#cb3-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-765"><a href="#cb3-765" aria-hidden="true" tabindex="-1"></a>price_test.groupby(<span class="st">'City'</span>).mean()</span>
<span id="cb3-766"><a href="#cb3-766" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-767"><a href="#cb3-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-768"><a href="#cb3-768" aria-hidden="true" tabindex="-1"></a>From this perspective and according to <span class="in">`GMV`</span>, new price action generates more revenues in cities 1, 2, and 5. In other cities, the company incurred financial losses. </span>
<span id="cb3-769"><a href="#cb3-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-770"><a href="#cb3-770" aria-hidden="true" tabindex="-1"></a><span class="fu">### Final Thoughts</span></span>
<span id="cb3-771"><a href="#cb3-771" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We should increase prices in city 1 based on the fact that we gained more money than before because our bikers accepted and fulfilled more requests leading to more GMV. </span>
<span id="cb3-772"><a href="#cb3-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-773"><a href="#cb3-773" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>In city 2, we saw lower requests have been accepted, and GMV fell in the first day, but in the second day, a sharp increase is seen. Ride per Check decreased meaning that either the number of checks is going upward or its decrease is not as much as rides, which is a not good thing, and because price conversion and ride numbers hurt badly, we don't recommend increasing prices.</span>
<span id="cb3-774"><a href="#cb3-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-775"><a href="#cb3-775" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>In city 3, bikers are more reluctant accepting their offers compared to the benchmark day. We lost our gross revenue and it's not recommended to continuing new price action.</span>
<span id="cb3-776"><a href="#cb3-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-777"><a href="#cb3-777" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>In city 4, we can infer that the times customers get our prices (check) is less than before and the probability of conversion is better. Although we lost money on day 2, increasing prices might be beneficial in the future.</span>
<span id="cb3-778"><a href="#cb3-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-779"><a href="#cb3-779" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We should increase prices in city 5 due to its promising relative changes.</span>
<span id="cb3-780"><a href="#cb3-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-781"><a href="#cb3-781" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We should not increase prices in city 6 as the number of requests, rides, probability of acceptance, and most importantly, GMV is declining.</span>
<span id="cb3-782"><a href="#cb3-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-783"><a href="#cb3-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-784"><a href="#cb3-784" aria-hidden="true" tabindex="-1"></a><span class="fu">### A More Elaborate Methodology</span></span>
<span id="cb3-785"><a href="#cb3-785" aria-hidden="true" tabindex="-1"></a>The data points in this data set are not sufficient to make an informed decision. In case we had more records, we could utilize some more complicated but precise methods. Econometrics provides valuable tools for scientifically measuring the effects of changes the company makes on other business metrics, such as <span class="in">`GMV`</span>. One of these tools is the difference-in-difference method. </span>
<span id="cb3-786"><a href="#cb3-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-787"><a href="#cb3-787" aria-hidden="true" tabindex="-1"></a>To employ the diff-in-diff approach, we would require more data points across various days before and after the change. This method assumes that there are parallel trends in the targeted metrics across different days for various cities. By using linear regression, we can more accurately determine whether the new prices are beneficial in each city."</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>